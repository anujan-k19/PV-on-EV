(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{324:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n(63),r=n.n(a),o=n(6),c=n(368),l=n(350),s=n(347),d=n(348),u=n(349),h=n(352),f=n(58),b=n(5),x=(n(324),n(183)),j=n(369),p=n(29),g=n(42),m=n(2),O=function(e){var t=e.xScale,n=e.innerHeight;return t.ticks().map((function(e){return Object(m.jsxs)("g",{className:"tick",transform:"translate(".concat(t(e),",0)"),children:[Object(m.jsx)("line",{y2:n,stroke:"black"}),Object(m.jsxs)("text",{y:n+5,style:{textAnchor:"middle"},dy:"0.73em",children:[" ",e]})]},e)}))},y=function(e){var t=e.yScale,n=e.innerWidth;return t.ticks().map((function(e){return Object(m.jsxs)("g",{className:"tick",transform:"translate(0,".concat(t(e),")"),children:[Object(m.jsx)("line",{x2:n,stroke:"black"}),Object(m.jsx)("text",{x:-10,style:{textAnchor:"end"},dy:"0.32em",children:e})]},e)}))},v=function(e){var t=e.data,n=e.xScale,i=e.yScale;return t.map((function(e){return Object(m.jsx)("line",{opacity:.5,stroke:"black",x1:n(0),y1:i(0),x2:n(5.52),y2:i(e.Wp)})}))},C=function(e){var t=e.data,n=e.innerHeight,i=e.xScale,a=e.yScale,r=e.graphWidth;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("text",{fontWeight:"800",textAnchor:"middle",transform:"translate(".concat(i(11.04/3),",").concat(7*n/8,")"),children:"Unreasonable"}),Object(m.jsx)("text",{fontWeight:"700",textAnchor:"middle",transform:"translate(".concat(i(11.04/3),",").concat(15*n/16,")"),fontSize:r>525?"16px":"11px",children:"(PV-efficiency too low)"}),Object(m.jsx)("polygon",{stroke:"none",points:"".concat(i(0),",").concat(a(0)," ").concat(i(5.52),",").concat(a(t[0].Wp)," ").concat(i(5.52),",").concat(a(0)),fill:"red",opacity:"0.2"}),Object(m.jsx)("text",{fontWeight:"800",textAnchor:"middle",transform:"translate(".concat(i(5.52/3),",").concat(n/3,")"),children:"Unrealistic"}),Object(m.jsx)("text",{fontWeight:"700",textAnchor:"middle",transform:"translate(".concat(i(5.52/3),",").concat(7*n/18,")"),fontSize:r>525?"16px":"11px",children:"(PV-efficiency too high)"}),Object(m.jsx)("polygon",{stroke:"none",points:"".concat(i(0),",").concat(a(0)," ").concat(i(0),",").concat(a(t[4].Wp)," ").concat(i(5.52),",").concat(a(t[4].Wp)),fill:"red",opacity:"0.2"})]})},k=function(e){var t=e.cars,n=e.xScale,i=e.yScale;e.studyCase,e.margin,e.offset;return t.map((function(e){return Object(m.jsx)("g",{transform:"translate(".concat(n(e.Equiv_PV_cell_area_m2),",").concat(i(e.PV_nominal_power_Wp),")"),children:Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"center",label:e.Automaker_Model,closeDelay:1e3,children:Object(m.jsx)("circle",{className:"point",size:15,r:5,fill:"#38B2AC"},e.Automaker_Model)})})}))},_=function(e){var t=e.data,n=e.xScale,i=e.yScale;return t.map((function(e){return Object(m.jsx)("text",{x:n(5.52)+5,y:i(e.Wp)+5,opacity:.5,textAnchor:"center",children:e.n_cell})}))},V=function(e){var t=e.studyCase,n=e.setStudyCase,i=e.graphWidth,a=e.casePosition,r=e.setCasePosition,o={top:50,bottom:100,left:100,right:100},c=i,l=500-o.top-o.bottom,s=c-o.left-o.right,d=[{n_cell:"15%",Wp:828},{n_cell:"20%",Wp:1104},{n_cell:"25%",Wp:1380},{n_cell:"30%",Wp:1656},{n_cell:"35%",Wp:1932}],u=Object(b.n)().domain([0,5.52]).range([0,s]),h=Object(b.n)().domain([0,1932]).range([l,0]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("svg",{className:"linechart",height:500,width:c,children:Object(m.jsxs)("g",{className:"linechart",transform:"translate(".concat(o.left,",").concat(o.top,")"),fontSize:"1em",children:[Object(m.jsx)(O,{xScale:u,innerHeight:l,tickOffset:7}),Object(m.jsx)("text",{className:"axis-label",x:s/2,y:l+45,textAnchor:"middle",children:"Total PV Cell Area [m\xb2]"}),Object(m.jsx)(y,{yScale:h,innerWidth:s}),Object(m.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(-65,",").concat(l/2,") rotate(-90)"),children:"PV  Array Nominal Power [Wp]"}),Object(m.jsx)("text",{className:"title",textAnchor:"middle",transform:"translate(".concat(s/2,",").concat(-o.top/3,")"),children:""}),Object(m.jsx)("path",{className:"xydomain",fill:"none",d:"M0,0V".concat(l," H").concat(s),stroke:"black"}),Object(m.jsx)(_,{data:d,xScale:u,yScale:h}),Object(m.jsxs)("g",{className:"clickable",onClick:function(e){return function(e){var t=e.clientX,i=e.clientY,a=document.getElementById("lineBack").getBoundingClientRect();r({x:(t-a.x)/s,y:i-a.y}),n([u.invert(t-a.x),h.invert(i-a.y)])}(e)},children:[Object(m.jsx)("rect",{id:"lineBack",width:s,height:l,fill:"rgba(235, 238, 238, 0.5)"}),Object(m.jsx)(v,{data:d,xScale:u,yScale:h}),Object(m.jsx)(C,{data:d,innerHeight:l,xScale:u,yScale:h,graphWidth:i}),Object(m.jsx)(k,{cars:[{Automaker_Model:"Toyota Prius 2009",PV_nominal_power_Wp:56,PV_cell_eff:16.5,Equiv_PV_cell_area_m2:.339393939},{Automaker_Model:"Toyota Prius 2017",PV_nominal_power_Wp:180,PV_cell_eff:22.5,Equiv_PV_cell_area_m2:.8},{Automaker_Model:"Toyota Prius 2019",PV_nominal_power_Wp:860,PV_cell_eff:34.9,Equiv_PV_cell_area_m2:2.464183381},{Automaker_Model:"Lightyear One 2019",PV_nominal_power_Wp:1e3,PV_cell_eff:22,Equiv_PV_cell_area_m2:4.545454545},{Automaker_Model:"Sonomotors Sion 2019",PV_nominal_power_Wp:1204,PV_cell_eff:24,Equiv_PV_cell_area_m2:5.016666667}],xScale:u,yScale:h,studyCase:t,margin:o,offset:[45,65]}),Object(m.jsx)(g.a,{x:a.x*s-14.5,y:-15+a.y,size:"30px",fill:"#2B6CB0","text-align":"centre"})]})]})})})},w=function(e){var t=e.graphWidth,n=Object(i.useState)({x:300/t,y:210}),a=Object(o.a)(n,2),r=a[0],c=a[1],h=Object(i.useState)([3.37645968489342,772.8000000000001]),f=Object(o.a)(h,2),b=f[0],O=f[1];return Object(m.jsxs)(s.a,{className:"row",height:"500px",marginInline:"10px",children:[Object(m.jsx)(s.a,{className:"column",width:"40%",children:Object(m.jsxs)(s.a,{borderWidth:"0px",direction:"column",width:"100%",height:"90%",alignItems:"left",justifyContent:"center",background:"#fffff",padding:"5%",children:[Object(m.jsx)(d.a,{className:"sectionHeading",borderTop:"none",fontSize:"1.4rem",children:"Visualisation of Current EVs "}),Object(m.jsxs)(u.a,{mline:"5%",marginBlock:"2%",children:["There are currently multiple PV-on-EV vehicles on the market currently, but it is difficult to compare them to what is required to meet future goals. The graph on the right is plotted with a few different car models shown by the teals points, you can hover over them to see the details. You can also click anywhere on the chart and create a custom specification for a car, represented by ",Object(m.jsx)(x.a,{as:g.a,fill:"#2B6CB0",paddingBottom:"1px",fontSize:20,"text-align":"centre"}),"."]}),Object(m.jsx)(u.a,{mline:"5%",marginBlock:"2%",children:"The lines represent the PV-cell efficiency required to achieve these stats, with the currently feasible ones shown."}),Object(m.jsx)("br",{}),Object(m.jsx)(d.a,{background:"white",color:"white",height:"50px",paddingTop:"10px",borderTopRadius:"none",fontWeight:"bold",marginInline:"auto",fontSize:"1.1rem",width:"300px",textAlign:"center",children:" Custom Case:"}),Object(m.jsxs)(s.a,{background:"rgba(0, 62, 116,0.9)",color:"white",alignSelf:"center",fontWeight:"bold",width:"100%",height:"30px",paddingBlock:"30px",borderBottomWidth:"1px",borderBottomRadius:"none",borderLeftWidth:"1px",borderLeftColor:"grey.100",borderRightWidth:"1px",borderRightColor:"grey.100",borderBottomColor:"grey.100",display:"flex",direction:"row",justifyContent:"center",alignItems:"center",children:[Object(m.jsxs)(u.a,{paddingInline:"20px",children:["PV Nominal Power: ".concat(b[1].toFixed(2)," Wp"),"  "]}),Object(m.jsx)(u.a,{paddingInline:"20px",children:" Total Cell-Area: ".concat(b[0].toFixed(2)," m\xb2")}),Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"top",padding:"10px",borderRadius:"7px",label:"Nominal power refers to the power output of the EV with PV, and the cell-area refers to the area of the car covered by PV cells. These variables are used are calculated from the variables above.",children:Object(m.jsx)("span",{children:Object(m.jsx)(x.a,{as:p.a,paddingBottom:"1px",marginInline:"5px",_hover:{opacity:.3}})})})]})]})}),Object(m.jsx)(s.a,{className:"column",width:"60%",children:Object(m.jsx)(s.a,{borderWidth:"0px",direction:"column",width:"100%",height:"90%",alignItems:"center",justifyContent:"center",background:"white",children:Object(m.jsx)(l.a,{flex:"1",height:"100%",children:Object(m.jsx)(V,{studyCase:b,setStudyCase:O,graphWidth:t,setCasePosition:c,casePosition:r})})})})]})},A=n(344),E=n(351),T=n(353),S=n(354),W=n(370),I=n(112),N=function(e){var t=e.sections,n=Object(A.a)(),i=n.isOpen,a=n.onOpen,r=n.onClose;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(s.a,{className:"nav",height:"50px",id:"navshadow",children:[Object(m.jsx)(s.a,{alignItems:"center",justifyContent:"space-between",children:Object(m.jsx)(E.a,{height:"40px",color:"white",background:"none",borderRadius:"4px",className:"navText",marginInline:"5px",size:"lg",icon:i?Object(m.jsx)(I.a,{}):Object(m.jsx)(I.b,{}),"aria-label":"Open Menu",display:{lg:"none"},onClick:i?r:a})}),Object(m.jsxs)(h.a,{children:[Object(m.jsx)(h.b,{textAlign:"center",float:{base:"none",lg:"left"},children:Object(m.jsx)(T.a,{h:"50px",children:Object(m.jsx)(S.a,{height:"40px",width:"100%",className:"navText",href:"#Home",borderRadius:"4px",paddingBlock:"5px",paddingInline:"50px",fontSize:"1.2rem",fontWeight:"bold",marginInline:"5px",color:"white",backgroundColor:"none",display:"inline-block",style:{textDecoration:"none"},children:"Home"})})},"home"),Object(m.jsxs)(h.a,{display:{base:"none",lg:"contents"},children:[t.map((function(e){return Object(m.jsx)(h.b,{float:"left",children:Object(m.jsx)(T.a,{h:"50px",children:Object(m.jsx)(S.a,{height:"40px",width:"100%",className:"navText",href:"#"+e,borderRadius:"4px",paddingBlock:"5px",paddingInline:"50px",fontSize:"1.2rem",fontWeight:"bold",marginInline:"5px",color:"white",backgroundColor:"none",display:"inline-block",style:{textDecoration:"none"},children:e})})},e)}))," "]})]})]}),i?Object(m.jsx)(l.a,{pb:4,display:{lg:"none"},children:Object(m.jsx)(W.a,{background:"#003E74",className:"nav",marginTop:50,spacing:"5px",children:t.map((function(e){return Object(m.jsx)(T.a,{h:"50px",children:Object(m.jsx)(S.a,{height:"40px",width:"100%",className:"navText",href:"#"+e,borderRadius:"4px",paddingBlock:"5px",paddingInline:"108px",fontSize:"1.2rem",fontWeight:"bold",marginInline:"5px",color:"white",display:"inline-block",style:{textDecoration:"none"},children:e})})}))})}):null]})},P=n(355),G=function(e){var t=e.options,n=e.id,i=e.selectedValue,a=e.onSelectedValueChange,r=e.label,o=e.width,c=e.tooltip;return Object(m.jsx)(s.a,{width:o,children:Object(m.jsxs)(T.a,{w:"100%",children:[Object(m.jsxs)("label",{width:"25%",display:"flex","flex-direction":"row",children:[" ",r]}),Object(m.jsx)(T.a,{paddingTop:"0px",children:Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"top",label:c,padding:"10px",borderRadius:"7px",children:Object(m.jsx)(T.a,{w:"20px",h:"20px",verticalAlign:"middle",children:Object(m.jsx)(x.a,{as:p.a,marginInline:"5px",_hover:{opacity:.3}})})})}),Object(m.jsx)(P.a,{bg:"white",mline:"2",width:"60%",id:n,defaultValue:i,onChange:function(e){return a(e.target.value)},children:t.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))})]})})},z=function(e){var t,n=e.graphWidth,a=e.dataOriginal,r=e.onClickValue,o=e.xAxisTitle,c=e.yAxisTitle,l=e.Title,s=e.xValue,d=e.yValue,u=e.xTitleOffset,h=e.yTitleOffset,f=e.titleOffset,x=e.colorTheme,j=e.country,p=e.toolTipText,g=e.formatNumber,O=e.height,y=e.dataLength,v=e.chartColour,C=e.axisSize,k=e.margin,_=1e3,V=n,w=a.filter((function(e){return r.includes(j(e))})),A=V-k.left-k.right,E=O-k.top-k.bottom,T=Object(i.useRef)();u+=-15,t=w.length>0?w.length:y,Object(i.useEffect)((function(){S()}),[w]);var S=function(){var e=Object(b.m)().domain(w.map(s)).range([0,A]).padding(.2),n=e.bandwidth(),i=Object(b.n)().domain([0,Object(b.k)(w,d)]).range([E,0]).nice(),a=Object(b.a)().scale(e).tickSize(0),r=Object(b.b)().scale(i).tickSizeInner(-A).tickSizeOuter(0).tickFormat(Object(b.d)("d")),m=Object(b.o)(x),O=function(e){return(["United Kingdom","United States of America"].includes(e.region)?e.abbrev:e.region).length*Math.log(n)*5.6*.7>E-i(d(e))},y=Object(b.r)(T.current).select("g"),k=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");y.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",A).attr("height",E).style("fill",v);var V=y.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),S=y.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);V.selectAll(".x-axis").data([null]).join("g").classed("x-axis",!0).style("font-size","0em").attr("transform","translate(0,".concat(E,")")).transition().duration(_).call(a),V.selectAll(".x-axis-title").data([o]).join("text").classed("x-axis-title",!0).attr("x",A/2).attr("y",E+u).style("text-anchor","middle").style("font-size",C).text((function(e){return e})),S.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(_).remove()})).transition().duration(_).call(r),S.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(_).remove()})).transition().duration(_).attr("fill","none").attr("d","M0,0V".concat(E," H").concat(A)).attr("stroke","black"),S.selectAll(".y-axis-title").data([c]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",h).style("font-size",C).attr("transform","translate(".concat(h,", ").concat(E/2,") rotate(-90)")).style("text-anchor","middle").text((function(e){return e})),y.selectAll(".chart-title").data([l]).join("text").classed("chart-title",!0).attr("x",A/2).attr("y",f).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e})),S.select(".tick").select("line").attr("opacity","0.1"),y.selectAll(".bar").data(w).join((function(e){return e.append("rect").classed("bar",!0).attr("y",(function(e){return i(0)})).attr("height",0)}),(function(e){return e}),(function(e){e.transition().duration(_).delay((function(e,n){return(t-n)*_/t})).attr("height",0).attr("y",E).remove()})).attr("x",(function(t){return e(s(t))})).style("fill",(function(e,t){return m(t)})).attr("width",(function(e){return n})).on("mouseover",(function(e,t){var n=e.target.__data__;k.html("<div> ".concat(j(n),":</div><div>").concat(p+d(n).toFixed(2),"  ").concat(g,"</div>")).style("visibility","visible"),Object(b.r)(undefined).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){k.style("top",e.pageY-110+"px").style("left",e.pageX+30+"px")})).on("mouseout",(function(){k.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")})).transition().duration(_).delay((function(e,n){return n*_/t})).attr("height",(function(e){return E-i(d(e))})).attr("y",(function(e){return i(d(e))})),y.selectAll(".tags").data(w).join((function(e){return e.append("text").classed("tags",!0).attr("transform","rotate(-90)").attr("opacity",0).attr("x",-E)}),(function(e){return e}),(function(e){e.remove()})).attr("font-size",(function(e){return"".concat(5.6*Math.log(n),"px")})).attr("y",(function(t){return e(s(t))+n/2+4.6*Math.log(n)/2.4})).text((function(e){return["United Kingdom","United States of America"].includes(e.region)?e.abbrev:e.region})).style("text-anchor","left").attr("id",(function(e){return O(e)?"blacktag":"whitetag"})).attr("fill",(function(e){return O(e)?"black":"white"})).transition().duration(_).delay((function(e,n){return n*_/t})).attr("opacity",1).attr("x",(function(e){return 12-E+(O(e)?E-11-i(d(e)):0)}))};return Object(m.jsxs)("div",{id:"barchart",children:[Object(m.jsx)("svg",{className:"chart",width:V,height:O,ref:T,children:Object(m.jsx)("g",{transform:"translate(".concat(k.left,", ").concat(k.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})},H=function(e){var t,n=e.graphWidth,a=e.dataOriginal,r=e.onClickValue,o=e.xAxisTitle,c=e.yAxisTitle,l=e.Title,s=e.xValue,d=e.yValue,u=e.xTitleOffset,h=e.yTitleOffset,f=e.titleOffset,x=e.colorTheme,j=e.radius,p=e.country,g=e.toolTipText1,O=e.formatNumber1,y=e.toolTipText2,v=e.formatNumber2,C=e.height,k=e.dataLength,_=e.abbrev,V=e.labelOn,w=e.setLabel,A=e.chartColour,E=e.axisSize,T=e.margin,S=1e3,W=n,I=a.filter((function(e){return r.includes(p(e))})),N=W-T.left-T.right,P=C-T.top-T.bottom,G=Object(i.useRef)();t=I.length>0?I.length:k,Object(i.useEffect)((function(){z()}),[I]);var z=function(){var e=Object(b.n)().domain([0,Object(b.k)(I,s)]).range([0,N]).nice(),n=Object(b.n)().domain([0,Object(b.k)(I,d)]).range([P,0]).nice(),i=Object(b.a)().scale(e).tickSizeInner(-P).tickPadding(10),a=Object(b.b)().scale(n).tickSizeInner(-N).tickPadding(10),r=Object(b.o)(x),m=Object(b.r)(G.current).select("g"),C=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");m.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",N).attr("height",P).style("fill",A);var k=m.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),T=m.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);k.selectAll(".x-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("x-axis",!0).attr("transform","translate(0,".concat(P,")"))}),(function(e){return e}),(function(e){return e.transition().duration(S).remove()})).transition().duration(S).call(i),k.selectAll(".x-axis-title").data([o]).join("text").classed("x-axis-title",!0).attr("x",N/2).attr("y",P+u).style("font-size",E).attr("fill","black").style("text-anchor","middle").text((function(e){return e})),T.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(S).remove()})).transition().duration(S).call(a),T.selectAll(".y-axis-title").data([c]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",h).attr("opacity",1).style("font-size",E).attr("transform","translate(".concat(h,", ").concat(P/2,") rotate(-90)")).attr("fill","#000").style("text-anchor","middle").text((function(e){return e})),T.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(S).remove()})).transition().duration(S).attr("fill","none").attr("d","M0,0V".concat(P," H").concat(N)).attr("stroke","black"),m.selectAll(".chart-title").data([l]).join("text").classed("chart-title",!0).attr("x",N/2).attr("y",f).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e})),m.selectAll(".textmark").data(I).join((function(t){return t.append("text").attr("y",(function(e){return n(d(e))-10})).attr("x",(function(t){return e(s(t))})).classed("textmark",!0).attr("opacity",0).style("text-anchor","middle")}),(function(e){return e}),(function(e){return e.transition().duration(S).delay((function(e,n){return(t-n)*S/t})).attr("opacity",0).remove()})).transition().duration(S).delay((function(e,n){return n*S/t})).text((function(e){return _(e)})).attr("opacity",V?1:0).attr("y",(function(e){return n(d(e))-10})).attr("x",(function(t){return e(s(t))})),m.selectAll(".mark").data(I).join((function(t){return t.append("circle").classed("mark",!0).attr("cy",(function(e){return n(0)})).attr("cx",(function(t){return e(0)})).attr("r",0)}),(function(e){return e}),(function(e){return e.transition().duration(S).delay((function(e,n){return(t-n)*S/t})).attr("r",0).remove()})).style("fill",(function(e,t){return r(t)})).on("mouseover",(function(e,t){var n=e.target.__data__;C.html("<div>".concat(p(n),":</div><div>").concat(g+s(n).toFixed(2)," ").concat(O,"</div><div>").concat(y+d(n).toFixed(2)," ").concat(v,"</div>")).style("visibility","visible"),Object(b.r)(undefined).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){C.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){C.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")})).transition().duration(S).delay((function(e,n){return n*S/t})).attr("cy",(function(e){return n(d(e))})).attr("cx",(function(t){return e(s(t))})).attr("r",j);var W=m.selectAll(".labelset").data([null]).join((function(e){var t=e.append("g").classed("labelset",!0).attr("transform","translate(20,40)").style("cursor","pointer");return t.append("rect").attr("width",120).attr("rx",5).attr("height",30).attr("y",-20).attr("opacity","0.65"),t.append("text").attr("x",20).style("text-align","centre"),t}),(function(e){return e}),(function(e){e.transition().duration(S).remove()})).on("click",(function(){w(!V)}));W.selectAll("text").text(V?"Labels On":"Labels Off").style("fill",V?"black":"white"),W.select("rect").style("fill",V?"white":"black")};return Object(m.jsxs)("div",{id:"barchart",children:[Object(m.jsx)("svg",{className:"chart",width:W,height:C,ref:G,children:Object(m.jsx)("g",{transform:"translate(".concat(T.left,", ").concat(T.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})},M=function(e){var t=e.colorScale,n=e.selection,i=e.duration,a=e.position,r=e.data,o=e.radius,c=e.legHov,l=e.onLegHov,s=e.legClick,d=e.onLegClick,u=e.prevData,h=n.selectAll(".legend").data([null]).join((function(e){var t=e.append("g").classed("legend",!0).attr("transform","translate".concat(a)).style("z-index","10");return t.append("rect").attr("x",2*-o).attr("y",2*-o).attr("rx",5).attr("width",160).attr("height",8*o).style("fill","#f8f8ff").attr("opacity",.9),t}),(function(e){return e}),(function(e){e.transition().duration(i).remove()}));r[0]!==u&&h.selectAll(".leg").remove(),h.selectAll(".leg").data(r).join((function(e){var n=e.append("g").classed("leg",!0).attr("transform",(function(e,t){return"translate(0,".concat(t*o*4,")")}));return n.append("rect").attr("x",2*-o).attr("y",2*-o).attr("width",160).attr("height",4*o).style("fill","#fff").attr("opacity",.1),n.append("circle").style("fill",(function(e,n){return t(n)})).attr("r",0),n.append("text").attr("opacity",0).text((function(e){return e})).attr("transform","translate(".concat(2*o,",0)")).attr("dy",".32em"),n}),(function(e){return e}),(function(e){e.transition().duration(i).remove()})).on("mouseover",(function(e){l(e.target.__data__)})).on("click",(function(e){s!==e.target.__data__?d(e.target.__data__):d(null),d(e.target.__data__)})).on("mouseout",(function(e){l(null)})).transition().duration(.1*i).attr("opacity",(function(e){return s||c?s===e||c===e?1:.3:1})),h.selectAll(".leg").selectAll("circle").transition().duration(i).attr("r",o),h.selectAll(".leg").selectAll("text").transition().duration(i).attr("opacity",1)},R=void 0;b.s.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var L=function(e){var t,n=e.graphWidth,a=e.dataOriginal,r=e.onClickValue,o=e.xAxisTitle,c=e.yAxisTitle,l=e.Title,s=e.xValue,d=e.yValue1,u=e.yValue2,h=e.xTitleOffset,f=e.yTitleOffset,x=e.titleOffset,j=e.colorTheme,p=e.country,g=e.toolTipText1,O=e.formatNumber1,y=e.toolTipText2,v=e.formatNumber2,C=e.height,k=e.dataLength,_=e.legHov,V=e.onLegHov,w=e.legClick,A=e.onLegClick,E=e.position,T=e.prevData,S=e.setPrev,W=e.chartColour,I=e.axisSize,N=e.margin,P=1e3,G=n,z=a.filter((function(e){return r.includes(p(e))})),H=G-N.left-N.right,L=C-N.top-N.bottom,Y=Object(i.useRef)();t=z.length>0?z.length:k,Object(i.useEffect)((function(){U(),S(g)}),[z]);var U=function(){var e,n=1;n=Object(b.k)(z,d)>Object(b.k)(z,u)?Object(b.k)(z,d):Object(b.k)(z,u),e=Object(b.l)(z,d)>Object(b.l)(z,u)?0>Object(b.l)(z,u)?Object(b.l)(z,u):0:0>Object(b.l)(z,d)?Object(b.l)(z,d):0;var i=Object(b.m)().domain(z.map(s)).range([0,H]).padding(.2),a=i.bandwidth(),r=Object(b.n)().domain([e,n]).range([L,0]).nice(),m=Object(b.a)().scale(i).tickPadding(10),C=Object(b.b)().scale(r).tickSizeInner(-H).tickPadding(10).tickFormat(Object(b.d)("d")),k=Object(b.o)(j),S=Object(b.r)(Y.current).select("g"),N=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");S.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",H).attr("height",L).style("fill",W).on("click",(function(){A(null)}));var G=S.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),U=S.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);G.selectAll(".x-axis").data([null]).join("g").classed("x-axis",!0).style("z-index","5").attr("transform","translate(0,".concat(L,")")).transition().duration(P).call(m).style("font-size",(function(e){return"".concat(2.6*Math.log(a),"px")})),G.selectAll(".x-axis-title").data([o]).join("text").classed("x-axis-title",!0).attr("x",H/2).attr("y",L+h).attr("fill","black").style("text-anchor","middle").style("font-size",I).text((function(e){return e})),U.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(P).remove()})).transition().duration(P).call(C),U.selectAll(".y-axis-title").data([c]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",f).style("font-size",I).attr("transform","translate(".concat(f,", ").concat(L/2,") rotate(-90)")).attr("fill","#000").style("text-anchor","middle").text((function(e){return e})),U.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(P).remove()})).transition().duration(P).attr("fill","none").attr("d","M0,0V".concat(L," H").concat(H)).attr("stroke","black"),S.selectAll(".chart-title").data([l]).join("text").classed("chart-title",!0).attr("x",H/2).attr("y",x).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e}));var B=S.selectAll(".bar1").data(z).join((function(e){return e.append("rect").classed("bar1",!0).attr("y",(function(e){return r(0)})).attr("height",0)}),(function(e){return e}),(function(e){return e.transition().duration(P).delay((function(e,n){return(t-n)*P/t})).attr("height",0).attr("y",L).remove()})).attr("x",(function(e){return i(s(e))})).style("fill",(function(){return k(0)})).attr("width",(function(e){return i.bandwidth()/2-1})).on("mouseover",(function(e,t){var n=e.target.__data__;N.html("<div>".concat(p(n),":</div><div>").concat(g+d(n).toFixed(2)," ").concat(O,"</div>")).style("visibility","visible"),Object(b.r)(R).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){N.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){N.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));B.transition("bars").duration(P).delay((function(e,n){return n*P/t})).attr("height",(function(e){return L-r(d(e))})).attr("y",(function(e){return r(d(e))}));var F=S.selectAll(".bar2").data(z).join((function(e){return e.append("rect").classed("bar2",!0).attr("y",(function(e){return r(0)})).attr("height",0)}),(function(e){return e}),(function(e){return e.transition().duration(P).delay((function(e,n){return(t-n)*P/t})).attr("height",0).attr("y",L).remove()})).attr("x",(function(e){return i(s(e))+i.bandwidth()/2+1})).style("fill",(function(){return k(1)})).attr("width",(function(e){return i.bandwidth()/2-1})).on("mouseover",(function(e,t){var n=e.target.__data__;N.html("<div>".concat(p(n),":</div><div>").concat(y+u(n).toFixed(2)," ").concat(v,"</div>")).style("visibility","visible"),Object(b.r)(R).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){N.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){N.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));F.transition("bars").duration(P).delay((function(e,n){return n*P/t})).attr("height",(function(e){return L-r(u(e))})).attr("y",(function(e){return r(u(e))})),B.transition("opac").duration(200).attr("opacity",(function(){return w===g?1:_?_===g?1:.2:w||_?.2:1})),F.transition("opac").duration(200).attr("opacity",(function(){return w===y?1:_?_===y?1:.2:w||_?.2:1})),M({colorScale:k,selection:S,duration:P,data:[g,y],position:E,radius:5,legHov:_,onLegHov:V,legClick:w,onLegClick:A,prevData:T}),S.selectAll(".legend").moveToFront()};return Object(m.jsxs)("div",{id:"barchart",children:[Object(m.jsx)("svg",{className:"chart",width:G,height:C,ref:Y,children:Object(m.jsx)("g",{transform:"translate(".concat(N.left,", ").concat(N.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})},Y=void 0;b.s.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var U,B,F,D=function(e){var t,n=e.graphWidth,a=e.dataOriginal,r=e.onClickValue,o=e.xAxisTitle,c=e.yAxisTitle,l=e.Title,s=e.xValue,d=e.yValue1,u=e.yValue2,h=e.xTitleOffset,f=e.yTitleOffset,x=e.titleOffset,j=e.colorTheme,p=e.country,g=e.toolTipText1,O=e.formatNumber1,y=e.toolTipText2,v=e.formatNumber2,C=e.height,k=e.dataLength,_=e.legHov,V=e.onLegHov,w=e.legClick,A=e.onLegClick,E=e.prevData,T=e.setPrev,S=e.chartColour,W=e.axisSize,I=e.margin,N=1e3,P=n,G=a.filter((function(e){return r.includes(p(e))})),z=P-I.left-I.right,H=C-I.top-I.bottom,R=Object(i.useRef)(),L=[g,y];t=G.length>0?G.length:k,Object(i.useEffect)((function(){U(),T(g)}),[G]);var U=function(){var e,i=1;i=Object(b.k)(G,d)>Object(b.k)(G,u)?Object(b.k)(G,d):Object(b.k)(G,u),e=Object(b.l)(G,d)>Object(b.l)(G,u)?0>Object(b.l)(G,u)?Object(b.l)(G,u):0:0>Object(b.l)(G,d)?Object(b.l)(G,d):0;var a=Object(b.m)().domain(G.map(s)).range([0,z]).padding(.2),r=a.bandwidth(),m=Object(b.n)().domain([e,i]).range([H,0]).nice(),C=Object(b.a)().scale(a).tickPadding(10),k=Object(b.b)().scale(m).tickSizeInner(-z).tickPadding(10),T=Object(b.o)(j),I=Object(b.r)(R.current).select("g"),P=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");I.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",z).attr("height",H).style("fill",S).on("click",(function(){A(null)}));var U=I.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),B=I.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);U.selectAll(".x-axis").data([null]).join("g").classed("x-axis",!0).style("z-index","5").style("font-size",(function(e){return"".concat(2.6*Math.log(r),"px")})).attr("transform","translate(0,".concat(H,")")).transition().duration(N).call(C),U.selectAll(".x-axis-title").data([o]).join("text").classed("x-axis-title",!0).attr("x",z/2).attr("y",H+h).attr("fill","black").style("text-anchor","middle").style("font-size",W).text((function(e){return e})),B.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(N).remove()})).transition().duration(N).call(k),B.selectAll(".y-axis-title").data([c]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",f).style("font-size",W).attr("transform","translate(".concat(f,", ").concat(H/2,") rotate(-90)")).attr("fill","#000").style("text-anchor","middle").text((function(e){return e})),B.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(N).remove()})).append("path").transition().duration(N).attr("fill","none").attr("d","M0,0V".concat(H," H").concat(z)).attr("stroke","black"),I.selectAll(".chart-title").data([l]).join("text").classed("chart-title",!0).attr("x",z/2).attr("y",x).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e}));var F=I.selectAll(".bar1").data(G).join((function(e){return e.append("rect").classed("bar1",!0).attr("y",(function(e){return m(0)})).attr("height",0)}),(function(e){return e}),(function(e){return e.transition().duration(N).delay((function(e,n){return(t-n)*N/t})).attr("height",0).attr("y",H).remove()})).attr("x",(function(e){return a(s(e))})).style("fill",(function(e,t){return T(0)})).attr("width",(function(e){return a.bandwidth()/2-1})).on("mouseover",(function(e,t){var n=e.target.__data__;P.html("<div>Country: ".concat(p(n),"</div><div>").concat(g+d(n).toFixed(2)," ").concat(O,"</div>")).style("visibility","visible"),Object(b.r)(Y).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){P.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){P.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));F.transition("bars").duration(N).delay((function(e,n){return n*N/t})).attr("height",(function(e){return Math.abs(-m(0)+m(d(e)))})).attr("y",(function(e){return-m(0)+m(d(e))>0?m(0):m(d(e))}));var D=I.selectAll(".bar2").data(G).join((function(e){return e.append("rect").classed("bar2",!0).attr("y",(function(e){return m(0)})).attr("height",0)}),(function(e){return e}),(function(e){return e.transition().duration(N).delay((function(e,n){return(t-n)*N/t})).attr("height",0).attr("y",H).remove()})).attr("x",(function(e){return a(s(e))+a.bandwidth()/2+1})).style("fill",(function(e,t){return T(1)})).attr("width",(function(e){return a.bandwidth()/2-1})).on("mouseover",(function(e,t){var n=e.target.__data__;P.html("<div> ".concat(p(n),":</div><div>").concat(y+u(n).toFixed(2)," ").concat(v,"</div>")).style("visibility","visible"),Object(b.r)(Y).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){P.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){P.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));D.transition("bars").duration(N).delay((function(e,n){return n*N/t})).attr("height",(function(e){return Math.abs(-m(0)+m(u(e)))})).attr("y",(function(e){return-m(0)+m(u(e))>0?m(0):m(u(e))})),F.transition("opac").duration(200).attr("opacity",(function(){return w===L[0]?1:_?_===L[0]?1:.2:w||_?.2:1})),D.transition("opac").duration(200).attr("opacity",(function(){return w===L[1]?1:_?_===L[1]?1:.2:w||_?.2:1})),M({colorScale:T,selection:I,duration:N,data:L,position:"(".concat(n-330,",",25,")"),radius:5,legHov:_,onLegHov:V,legClick:w,onLegClick:A,prevData:E}),I.selectAll(".legend").moveToFront()};return Object(m.jsxs)("div",{id:"barchart",children:[Object(m.jsx)("svg",{className:"chart",width:P,height:C,ref:R,children:Object(m.jsx)("g",{transform:"translate(".concat(I.left,", ").concat(I.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})},K=function(e){var t=e.onClicked,n=e.dataOriginal,a=e.graph,r=e.graphWidth,c=e.dataLength,l=e.legHov,d=e.onLegHov,h=e.legClick,f=e.onLegClick,x=e.attributes,j=500,p=Object(i.useState)(null),g=Object(o.a)(p,2),O=g[0],y=g[1],v=Object(i.useState)(!0),C=Object(o.a)(v,2),k=C[0],_=C[1],V="1em",w="rgba(235, 238, 238, 0.5)",A=-27,E=50,T=20,S={top:30,bottom:80,left:90,right:20};return a===x[0]?Object(m.jsx)(H,{graphWidth:r,height:j,dataOriginal:n,onClickValue:t,xAxisTitle:"PV on EV Emissions [gCO2e/kWh]",yAxisTitle:"EV Emissions [gCO2e/kWh]",Title:"",xValue:function(e){return e.PVonEV_usageEmissions},yValue:function(e){return e.EV_Usage_Emissions},colorTheme:b.p,radius:5,country:function(e){return e.region},toolTipText1:"x: ",toolTipText2:"y: ",formatNumber1:"",formatNumber2:"",dataLength:c,xTitleOffset:E,yTitleOffset:A,titleOffset:T,chartColour:w,axisSize:V,margin:S,abbrev:function(e){return e.abbrev},labelOn:k,setLabel:_}):a===x[1]?Object(m.jsx)(z,{graphWidth:r,height:j,dataOriginal:n,onClickValue:t,xAxisTitle:"",yAxisTitle:"EV-Usage Emissions Reductions [gCO2e/km]",Title:"",xValue:function(e){return e.abbrev},yValue:function(e){return e.EV_Usage_Emissions},xTitleOffset:E,yTitleOffset:A,titleOffset:T,colorTheme:b.q,country:function(e){return e.region},toolTipText:"EV-Usage Emissions Reductions: ",formatNumber:"gCO2e/km",dataLength:c,chartColour:w,axisSize:V,margin:S}):a===x[5]?Object(m.jsx)(z,{graphWidth:r,height:j,dataOriginal:n,onClickValue:t,xAxisTitle:"",yAxisTitle:"Annual Global Horizontal Irradiance [kWh/m\xb2]",Title:"",xValue:function(e){return e.abbrev},yValue:function(e){return e.Annual_GHI_kWh_m2},xTitleOffset:E,yTitleOffset:A,titleOffset:T,colorTheme:b.q,country:function(e){return e.region},toolTipText:"GHI: ",formatNumber:"kWh/m\xb2",dataLength:c,chartColour:w,axisSize:V,margin:S}):a===x[2]?Object(m.jsx)(L,{graphWidth:r,height:j,dataOriginal:n,onClickValue:t,xAxisTitle:"",yAxisTitle:"Carbon Intensity of Electricity Grid [gCO2e/kWh]",Title:"",xValue:function(e){return e.abbrev},yValue1:function(e){return e.CIEG2013_gCO2e_kWh},yValue2:function(e){return e.CIEG_gCO2_kWh_2018},xTitleOffset:E,yTitleOffset:A,titleOffset:T,colorTheme:["orange","red"],country:function(e){return e.region},toolTipText1:"CIEG (2013): ",toolTipText2:"CIEG (2018): ",formatNumber1:"gCO2e/kWh",formatNumber2:"gCO2e/kWh",dataLength:c,chartColour:w,axisSize:V,margin:S,legHov:l,onLegHov:d,legClick:h,onLegClick:f,position:"(".concat(r-320,",",25,")"),prevData:O,setPrev:y}):a===x[3]?Object(m.jsx)(L,{graphWidth:r,height:j,dataOriginal:n,onClickValue:t,xAxisTitle:"",yAxisTitle:"VKT/day [km/day]",Title:"",xValue:function(e){return e.abbrev},yValue1:function(e){return e.VKT_day},yValue2:function(e){return e.PV_only_drivingRange_km_day},xTitleOffset:E,yTitleOffset:A,titleOffset:T,colorTheme:["#02893B","#BBCE00"],country:function(e){return e.region},toolTipText1:"Average VKT/day: ",toolTipText2:"PV Only Range: ",formatNumber1:"km/day",formatNumber2:"km/day",dataLength:c,chartColour:w,axisSize:V,margin:S,abbrev:function(e){return e.abbrev},legHov:l,onLegHov:d,legClick:h,onLegClick:f,position:"(".concat(r-330,",",25,")"),prevData:O,setPrev:y}):a===x[4]?Object(m.jsx)(D,{height:j,graphWidth:r,dataOriginal:n,onClickValue:t,xAxisTitle:"",yAxisTitle:"CIEG Decrease [gCO2e/kWh]",Title:"",xValue:function(e){return e.abbrev},yValue1:function(e){return-e.CIEG_trends_gCO2e_kWh},yValue2:function(e){return-e.CIEG_PV_change_trends_gCO2e_kWh},xTitleOffset:E,yTitleOffset:A,titleOffset:T,colorTheme:["orange","red"],country:function(e){return e.region},toolTipText1:"CIEG Change: ",toolTipText2:"CIEG PV Change: ",formatNumber1:"gCO2e/kWh",formatNumber2:"gCO2e/kWh",dataLength:c,chartColour:w,axisSize:V,margin:S,abbrev:function(e){return e.abbrev},legHov:l,onLegHov:d,legClick:h,onLegClick:f,prevData:O,setPrev:y}):Object(m.jsx)(s.a,{alignItems:"center",width:document.body.clientWidth/2,children:Object(m.jsx)(u.a,{children:"invalid"})})},q=function(e){var t=e.data,n=e.VKToption,i=e.PV_CellNominalEffiency,a=e.cellArea_ratio,r=e.caseOption,o=e.PV_performanceRatio,c=t,l=new Array(c.length),s=new Array(c.length);if(n[1])for(var d=0;d<c.length;d++)l[d]=c[d].VKTstat;else l.fill(n[0]);for(var u=0;u<c.length;u++)s[u]=l[u]/365;var h,f,b=["High Case","Medium Case","Low Case"].indexOf(r[0]);!1===r[1]?(h=[280,200,150][b],f=[4.3,4.3,3.68][b]):(h=r[2],f=r[3]);for(var x=1e3*i*153.3/1e4*Math.floor(f*a*1e4/153.3),j=1/h*1e3,p=[],g=0;g<c.length;g++)p.push(1500*x/(25*l[g]));var m=[];c.forEach((function(e){var t=(-.0348*e.Share_of_diesel_gasoline_vehicles/100+.9318)*e.ICEV_usage_emissions_gCO2e_km+11.826*e.Share_of_diesel_gasoline_vehicles/100-8.827;m.push(t)}));var O,y=[];c.forEach((function(e){if("number"===typeof e.CIEG_kgCO2_kWh)O=e.CIEG_kgCO2_kWh/j*1e3;else{O=new Array(e.CIEG_kgCO2_kWh.length);for(var t=0;t<e.CIEG_kgCO2_kWh.length;t++)O[t]=e.CIEG_kgCO2_kWh[t]/j*1e3}y.push(O)}));var v=[],C=[];c.forEach((function(e){var t=e.Annual_GHI_kWh_m2*o*x/1e3;v.push(t),C.push(t/.86)}));var k=[],_=[],V=0;C.forEach((function(e){var t=e*j/365;k.push(t),t/s[V]>=1?_.push(1):_.push(t/s[V]),V+=1}));var w=[],A=[],E=[],T=[];V=0,c.forEach((function(e){if("number"===typeof e.CIEG_kgCO2_kWh){var t=C[V]*e.CIEG_kgCO2_kWh*1e3/l[V];w.push(t),y[V]>t?A.push(y[V]+p[V]-t):A.push(p[V]),E.push((y[V]-A[V])/y[V]),T.push(-y[V]+A[V])}else{for(var n=new Array(e.CIEG_kgCO2_kWh.length),i=new Array(e.CIEG_kgCO2_kWh.length),a=new Array(e.CIEG_kgCO2_kWh.length),r=new Array(e.CIEG_kgCO2_kWh.length),o=0;o<e.CIEG_kgCO2_kWh.length;o++)n[o]=C[V]*e.CIEG_kgCO2_kWh[o]*1e3/l[V],y[V][o]>n[o]?i[o]=y[V][o]+p[V]-n[o]:i[o]=p[V],a[o]=(y[V][o]-i[o])/y[V][o],r[o]=-y[V][o]+i[o];w.push(n),A.push(i),E.push(a),T.push(r)}V+=1}));var S=[],W=[],I=[];V=0,c.forEach((function(e){if("number"===typeof e.CIEG_kgCO2_kWh){var t=e.CIEG_gCO2_kWh-e.CIEG2013_gCO2e_kWh,n=1e3*A[V]/h;S.push(t),W.push(n),I.push(n-e.CIEG_gCO2_kWh)}else{var i=e.Year.indexOf(2018),a=e.CIEG_gCO2_kWh[i]-e.CIEG2013_gCO2e_kWh,r=1e3*A[V][i]/h,o=r-e.CIEG_gCO2_kWh[i];S.push(a),W.push(r),I.push(o)}V+=1}));var N=[],P=[],G=[],z=[];V=0,c.forEach((function(e){var t=e.Electricity_cost_USD_kWh*l[V]*h/1e3;N.push(t),e.Electricity_cost_USD_kWh*C[V]<t?P.push(e.Electricity_cost_USD_kWh*C[V]):P.push(t),G.push(t-e.Electricity_cost_USD_kWh*C[V]);for(var n=P[V],i=1;i<15;i++)n+=P[V]*Math.pow(1.025,i);z.push(n),V+=1}));for(var H=c,M=0;M<c.length;M++){if("TRUE"===c[M].G20&&(H[M].G20=!0),H[M].ICEV_Usage_Emissions=m[M],H[M].PV_output_kWh_yr=v[M],H[M].gridSavings_kWh_yr=C[M],H[M].PV_only_drivingRange_km_day=k[M],H[M].PV_only_drivingRange_perc=_[M],"number"===typeof y[M])H[M].EV_Usage_Emissions=y[M],H[M].emissionReduction_savings=w[M],H[M].PVonEV_usageEmissions=A[M],H[M].PVonEV_EV_ratio=E[M],H[M].EV_Usage_Emissions_change=T[M],H[M].CIEG_gCO2_kWh_2018=H[M].CIEG_gCO2_kWh,H[M].CIEG_kgCO2_kWh_2018=H[M].CIEG_kgCO2_kWh;else{H[M].EV_Usage_Emissions_Years=y[M],H[M].emissionReduction_savings_Years=w[M],H[M].PVonEV_usageEmissions_Years=A[M],H[M].PVonEV_EV_ratio_Years=E[M],H[M].EV_Usage_Emissions_change_Years=T[M],H[M].CIEG_kgCO2_kWh_Years=H[M].CIEG_kgCO2_kWh,H[M].CIEG_gCO2_kWh_Years=H[M].CIEG_gCO2_kWh;var R=H[M].Year.indexOf(2018);H[M].EV_Usage_Emissions=y[M][R],H[M].emissionReduction_savings=w[M][R],H[M].PVonEV_usageEmissions=A[M][R],H[M].PVonEV_EV_ratio=E[M][R],H[M].EV_Usage_Emissions_change=T[M][R],H[M].CIEG_gCO2_kWh_2018=H[M].CIEG_gCO2_kWh[R],H[M].CIEG_kgCO2_kWh_2018=H[M].CIEG_kgCO2_kWh[R]}H[M].CIEG_trends_gCO2e_kWh=S[M],H[M].CIEG_PV_trends_gCO2e_kWh=W[M],H[M].CIEG_PV_change_trends_gCO2e_kWh=I[M],H[M].EV_Electricitycost_USD_yr=N[M],H[M].PVonEV_Savings_USD_yr=P[M],H[M].PVonEV_Cost_USD_yr=G[M],H[M].PVonEV_LifetimeSavings_USD_yr=z[M],H[M].VKT_day=s[M]}return H},X=function(e){var t=e.onClicked,n=e.graphWidth,a=e.dataLength,r=e.VKToption,c=e.dataRaw,d=e.cellArea_ratio,h=e.caseOption,f=e.PV_performanceRatio,b=e.PV_CellNominalEffiency,x=e.text,j=new Array,p=new Array;for(var g in x)x[g].title&&(j.push(x[g].title),p.push(x[g].desc));var O=q({data:c,VKToption:r,PV_CellNominalEffiency:b/100,cellArea_ratio:d/100,caseOption:h,PV_performanceRatio:f/100,useStat:!1}),y=Object(i.useState)(null),v=Object(o.a)(y,2),C=v[0],k=v[1],_=Object(i.useState)(null),V=Object(o.a)(_,2),w=V[0],A=V[1],E=Object(i.useState)(j[1]),T=Object(o.a)(E,2),S=T[0],W=T[1];return Object(m.jsxs)(s.a,{className:"column",borderWidth:"0px",direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[Object(m.jsx)(s.a,{mt:"2%",width:"90%",children:Object(m.jsx)(G,{label:"Select Graph:",options:j,id:"menuDrop",selectedValue:S,onSelectedValueChange:function(e){A(null),k(null),W(e)},width:"100%",tooltip:"Here you can select different graphs to look at."})}),Object(m.jsx)(u.a,{height:"120",display:{base:"none","500px":"content"},paddingInline:"2%",marginBlock:"1%",marginInline:"8%",background:"white",children:p[j.indexOf(S)]}),Object(m.jsx)(l.a,{id:"box",flex:"1",height:"auto",width:"auto",children:Object(m.jsx)(K,{onClicked:t,dataOriginal:O,graph:S,graphWidth:n,dataLength:a,legHov:C,onLegHov:k,legClick:w,onLegClick:A,attributes:j})})]})},J=n(365),Z=n(181),Q=n(366),$=n(367),ee=function(e){var t=e.options,n=e.selectedValue,a=e.onSelectedValueChange,r=e.label,c=e.tooltip,l=Object(i.useState)(n[2]),d=Object(o.a)(l,2),u=d[0],h=d[1],f=Object(i.useState)(n[3]),b=Object(o.a)(f,2),x=b[0],j=b[1];return Object(m.jsxs)(s.a,{className:"buttonSpace",width:"90%",children:[Object(m.jsx)(s.a,{className:"column",width:"40%",justifyContent:"center",children:Object(m.jsx)(G,{label:r,options:t,id:"menuDrop",selectedValue:n[0],onSelectedValueChange:function(e){var t=n[2],i=n[3];a([e,!1,t,i])},width:"90%",tooltip:c})}),Object(m.jsx)(T.a,{width:"20%",children:Object(m.jsxs)(J.a,{children:[Object(m.jsx)(J.h,{children:Object(m.jsx)(Z.a,{colorScheme:"green",width:"100%",height:10,fontSize:"0.9rem",marginInline:"2%",className:"buttonSpace",children:"Custom"})}),Object(m.jsxs)(J.e,{width:"600px",children:[Object(m.jsx)(J.b,{}),Object(m.jsxs)(s.a,{className:"buttonSpace",width:"100%",children:[Object(m.jsxs)("label",{style:{paddingTop:"6px"},display:"flex","flex-direction":"row",children:[" ","EV Energy Consumption:"," "]}),Object(m.jsxs)(Q.a,{width:"40%",marginInline:"auto",focusThumbOnChange:!1,min:100,max:300,value:u,onChange:function(e){return h(e)},onChangeEnd:function(e){var t=n[0],i=n[3];a([t,!0,e,i])},children:[Object(m.jsx)(Q.d,{bg:"blue.100",children:Object(m.jsx)(Q.b,{})}),Object(m.jsx)(Q.c,{boxSize:3.5})]}),Object(m.jsx)($.a,{min:100,max:300,width:"100px",value:u+"Wh/km",marginLeft:"auto",onChange:function(e){h(e)},onBlur:function(){var e=n[0],t=n[3];a([e,!0,u,t])},children:Object(m.jsx)($.b,{bg:"white",style:{padding:0}})})]}),Object(m.jsxs)(s.a,{className:"buttonSpace",width:"100%",children:[Object(m.jsxs)("label",{style:{paddingTop:"6px"},display:"flex","flex-direction":"row",children:[" ","EV Vehicle Footprint:"," "]}),Object(m.jsxs)(Q.a,{width:"40%",marginInline:"auto",focusThumbOnChange:!1,min:2,max:5,value:x,onChange:function(e){return j(e)},onChangeEnd:function(e){var t=n[0],i=n[2];a([t,!0,i,e])},children:[Object(m.jsx)(Q.d,{bg:"blue.100",children:Object(m.jsx)(Q.b,{})}),Object(m.jsx)(Q.c,{boxSize:3.5})]}),Object(m.jsx)($.a,{min:2,max:5,marginLeft:"auto",width:"100px",value:x+"m\xb2",onChange:function(e){j(e)},onBlur:function(){var e=n[0],t=n[2];a([e,!0,t,x])},children:Object(m.jsx)($.b,{bg:"white",style:{padding:0}})})]})]})]})})]})},te=function(e){var t=e.selectedValue,n=e.onSelectedValueChange,a=e.min,r=e.max,c=e.label,l=e.tooltip,d=Object(i.useState)(t[0]),u=Object(o.a)(d,2),h=u[0],f=u[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(s.a,{className:"buttonSpace",width:"90%",children:[Object(m.jsxs)(T.a,{children:[Object(m.jsxs)("label",{width:"25%",display:"flex","flex-direction":"row",children:[" ",c," "]}),Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"top",label:l,padding:"10px",borderRadius:"7px",children:Object(m.jsx)(T.a,{w:"20px",h:"20px",verticalAlign:"middle",children:Object(m.jsx)(x.a,{as:p.a,paddingBottom:"1px",marginInline:"5px",_hover:{opacity:.3}})})})]}),Object(m.jsx)(Z.a,{colorScheme:"green",width:"35%",marginInline:"2%",fontSize:"0.9rem",className:"buttonSpace",onClick:function(){return n([16e3,!0])},children:document.body.clientWidth/11>90?"Region Specific":"Region"}),Object(m.jsxs)(J.a,{children:[Object(m.jsx)(J.h,{children:Object(m.jsx)(Z.a,{colorScheme:"green",width:"30%",fontSize:"0.9rem",marginInline:"2%",className:"buttonSpace",children:document.body.clientWidth/11>90?"Custom Average":"Custom"})}),Object(m.jsxs)(J.e,{width:"300px",children:[Object(m.jsx)(J.b,{}),Object(m.jsxs)(s.a,{className:"buttonSpace",width:"100%",children:[Object(m.jsxs)(Q.a,{width:"50%",marginInline:"4%",focusThumbOnChange:!1,min:a,max:r,value:h,onChange:function(e){return f(e)},onChangeEnd:function(e){n([e,!1])},children:[Object(m.jsx)(Q.d,{bg:"blue.100",children:Object(m.jsx)(Q.b,{})}),Object(m.jsx)(Q.c,{boxSize:3.5})]}),Object(m.jsx)($.a,{min:a,max:r,width:"40%",value:h+" km",marginInline:"2%",onChange:function(e){f(e)},onBlur:function(){n([h,!1])},children:Object(m.jsx)($.b,{bg:"white",style:{padding:0}})})]})]})]})]})})},ne=function(e){var t=e.selectedValue,n=e.onSelectedValueChange,a=e.min,r=e.max,c=e.label,l=e.tooltip,d=Object(i.useState)(t),u=Object(o.a)(d,2),h=u[0],f=u[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(s.a,{className:"buttonSpace",verticalAlign:"middle",width:"90%",children:[Object(m.jsxs)("label",{style:{paddingTop:"6px"},width:"100px",display:"flex","flex-direction":"row",children:[" ",c," "]}),Object(m.jsx)(T.a,{paddingBottom:"1px",children:Object(m.jsx)(j.a,{textAlign:"top",padding:"7px",borderRadius:"7px",label:l,children:Object(m.jsx)(T.a,{w:"20px",h:"20px",verticalAlign:"middle",children:Object(m.jsx)(x.a,{as:p.a,marginInline:"5px",_hover:{opacity:.3}})})})}),Object(m.jsxs)(Q.a,{width:"35%",ml:"4%",mr:"4%",focusThumbOnChange:!1,step:.1,min:a,max:r,value:h,onChange:function(e){return f(e)},onChangeEnd:function(e){return n(e)},children:[Object(m.jsx)(Q.d,{bg:"blue.100",children:Object(m.jsx)(Q.b,{})}),Object(m.jsx)(Q.c,{boxSize:3.5})]}),Object(m.jsx)($.a,{min:a,max:r,precision:1,width:"60px",value:h+"%",onChange:function(e){return f(e)},onBlur:function(){n(h)},children:Object(m.jsx)($.b,{bg:"white",style:{paddingRight:0,paddingLeft:"10%"}})})]})})},ie=n(111),ae=n(363),re=n(12),oe=n(40),ce=function(e){var t,n=e.countries,i=e.setCountries,a=e.setMapClicked,r=e.G20,o=e.EUR,c=e.ASIA,l=(e.onClose,e.arraySame);e.buttonWidth;return Object(m.jsxs)(J.a,{children:[Object(m.jsx)(J.h,{children:Object(m.jsx)(Z.a,{marginInline:"2%",colorScheme:"teal",leftIcon:Object(m.jsx)(oe.a,{}),children:" Selection Options "})}),Object(m.jsxs)(J.e,{children:[Object(m.jsx)(J.b,{}),Object(m.jsx)(J.d,{}),Object(m.jsx)(J.g,{children:"Selection by Group"}),Object(m.jsxs)(J.c,{children:[Object(m.jsx)(Z.a,{alignSelf:"center",margin:"2%",leftIcon:Object(m.jsx)(g.d,{}),mr:3,colorScheme:"blue",onClick:function(){l([o,n])||n===[]?i(n.filter((function(e){return!o.includes(e)}))):(t=o.filter((function(e){return!n.includes(e)})),i([].concat(Object(re.a)(n),Object(re.a)(t)))),a(!0)},children:l([o,n])?"Deselect Europe":"Select All Europe"}),Object(m.jsx)(Z.a,{alignSelf:"center",leftIcon:Object(m.jsx)(g.b,{}),margin:"2%",mr:3,colorScheme:"orange",onClick:function(){l([r,n])||n===[]?i(n.filter((function(e){return!r.includes(e)}))):(t=r.filter((function(e){return!n.includes(e)})),i([].concat(Object(re.a)(n),Object(re.a)(t)))),a(!0)},children:l([r,n])?"Deselect G20":" Select All G20"}),Object(m.jsx)(Z.a,{alignSelf:"center",margin:"2%",leftIcon:Object(m.jsx)(g.c,{}),mr:3,colorScheme:"green",onClick:function(){l([c,n])||n===[]?i(n.filter((function(e){return!c.includes(e)}))):(t=c.filter((function(e){return!n.includes(e)})),i([].concat(Object(re.a)(n),Object(re.a)(t)))),a(!0)},children:l([c,n])?"Deselect Asia":" Select All Asia"})]}),Object(m.jsx)(J.f,{})]})]})},le=void 0,se=Object(b.g)(),de=Object(b.h)(se),ue=Object(b.f)(),he=function(e){var t,n=e.data.country,i=e.setCountries,a=e.countries,r=e.mapClicked,o=e.setMapClicked,c=e.regionsAvailable,l=Object(b.r)(".map-container"),s=Object(b.r)(".shapes");l.call(Object(b.t)().scaleExtent([.9,10]).translateExtent([[0,-40],[900,500]]).on("zoom",(function(e){s.attr("transform",e.transform)})));var d=Object(b.r)(".map-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("path",{className:"graticules",d:de(ue())}),n.features.map((function(e){return Object(m.jsx)("path",{className:"country",id:e.properties.name,d:de(e),fill:c.includes(e.properties.name)?"#0F8291":"#ebf4f4",onClick:function(){if(c.includes(e.properties.name)){var t=a.indexOf(e.properties.name);U=a.includes(e.properties.name)?a.filter((function(e){return a.indexOf(e)!==t})):[].concat(Object(re.a)(a),[e.properties.name]),i(U)}else console.log("Data for country unavailable!")},strokeWidth:.09,opacity:a.includes(e.properties.name)?.6:1,stroke:"black",onMouseOver:function(e){t=e.target.id,d.html("<div>".concat(t,"</div>")).style("visibility","visible"),Object(b.r)(le).transition().attr("fill","#eec42d")},onMouseMove:function(e){d.style("top",e.nativeEvent.layerY+20+"px").style("left",e.nativeEvent.layerX+"px")},onMouseOut:function(){d.html("").style("visibility","hidden"),Object(b.r)(le).transition().attr("fill","#437c90")}},e.properties.name)}))," /",Object(m.jsx)("rect",{height:"100%",width:"100%",fill:r?"none":"grey",opacity:"0.3",onClick:function(){o(!0)}}),Object(m.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",className:"pretext",fill:"none",stroke:r?"none":"black",onClick:function(){o(!0)},children:"Drag around the map and click to select a country."}),Object(m.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",fill:"none",stroke:r?"none":"black",children:"Click here to start."})]})},fe=function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1],a=0;if(null==n||null==i)return!1;if(0===n.length&&0!==i.length||0!==n.length&&0===i.length)return!1;if(0===n.length&&0===i.length)return!0;for(var r=0;r<n.length;r++)for(var c=0;c<i.length;c++)n[r]===i[c]&&(a+=1);return a===n.length},be=function(e){var t=e.setlength,n=e.onClicked,i=e.setOnClicked,a=e.data,r=e.onClose,o=e.mapClicked,c=e.setMapClicked,d=e.countries,u=e.setCountries,h=e.regionsAvailable;if(!a)return Object(m.jsx)("pre",{children:"Loading..."});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ae.f,{children:["Select a country:",Object(m.jsx)(ce,{countries:d,setCountries:u,G20:["South Africa","Indonesia","Saudi Arabia","Australia","India","China","Japan","South Korea","Turkey","Mexico","United States of America","Germany","Russia","Argentina","Italy","Europe","United Kingdom","Canada","Brazil","France"],EUR:["Turkey","Germany","Italy","Europe","United Kingdom","France","Russia"],ASIA:["China","India","Indonesia","Japan","South Korea","Russia"],onClose:r,arraySame:fe,setMapClicked:c,buttonWidth:"50%"}),Object(m.jsx)(Z.a,{mr:3,leftIcon:Object(m.jsx)(oe.b,{}),colorScheme:"red",onClick:function(){u([]),c(!0)},children:"Clear Selection"})]}),Object(m.jsx)(ae.c,{}),Object(m.jsx)(ae.b,{height:"100%",children:Object(m.jsx)(s.a,{display:"flex","flex-direction":"column",height:"100%",width:"100%",children:Object(m.jsxs)(l.a,{className:"map-div",flex:"1",height:"100%",width:"100%",children:[Object(m.jsx)("div",{className:"map-tooltip"}),Object(m.jsx)("svg",{className:"map-container",id:"map-container",height:"100%",width:"100%",children:Object(m.jsx)("g",{className:"shapes",children:Object(m.jsx)(he,{data:a,countries:d,setCountries:u,mapClicked:o,setMapClicked:c,regionsAvailable:h})})})]})})}),Object(m.jsx)(ae.e,{children:Object(m.jsx)(Z.a,{mr:3,colorScheme:"teal",onClick:function(){t(n.length),i(d),r()},children:Object(m.jsx)("a",{href:"#graphArea",children:"Continue"})})})]})},xe=void 0,je=Object(b.e)(),pe=Object(b.h)(je),ge=function(e){var t=e.data.state,n=e.mapClicked,i=e.setMapClicked,a=(e.regionsAvailable,Object(b.r)(".map-container")),r=Object(b.r)(".shapes");a.call(Object(b.t)().scaleExtent([.9,10]).translateExtent([[0,-40],[900,500]]).on("zoom",(function(e){r.attr("transform",e.transform)})));var o=Object(b.r)(".map-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");return Object(m.jsxs)(m.Fragment,{children:[t.features.map((function(e){return Object(m.jsx)("path",{className:"USState",id:e.properties.name,d:pe(e),fill:"#ebf4f4",strokeWidth:.09,stroke:"black",onMouseOver:function(e){B=e.target.id,o.html("<div>".concat(B,"</div>")).style("visibility","visible"),Object(b.r)(xe).transition().attr("fill","#eec42d")},onMouseMove:function(e){o.style("top",e.nativeEvent.layerY+30+"px").style("left",e.nativeEvent.layerX+"px")},onMouseOut:function(){o.html("").style("visibility","hidden"),Object(b.r)(xe).transition().attr("fill","#437c90")}},100*e.id)}))," /",Object(m.jsx)("rect",{height:"100%",width:"100%",fill:n?"none":"grey",opacity:"0.3",onClick:function(){i(!0)}}),Object(m.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",className:"pretext",fill:"none",stroke:n?"none":"black",onClick:function(){i(!0)},children:"Drag/Zoom around the map and click to select a state."}),Object(m.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",fill:"none",stroke:n?"none":"black",children:"Click here to start."})]})},me=function(e){var t=e.setlength,n=e.onClicked,i=e.setOnClicked,a=e.data,r=e.onClose,o=e.mapClicked,c=e.setMapClicked,d=e.countries,u=e.setCountries,h=e.regionsAvailable;if(!a)return Object(m.jsx)("pre",{children:"Loading..."});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ae.f,{children:["Select a State:",Object(m.jsx)(Z.a,{marginInline:3,leftIcon:Object(m.jsx)(oe.b,{}),colorScheme:"red",onClick:function(){u([]),c(!0)},children:"Clear Selection"})]}),Object(m.jsx)(ae.c,{}),Object(m.jsx)(ae.b,{height:"100%",children:Object(m.jsx)(s.a,{display:"flex","flex-direction":"column",height:"100%",width:"100%",children:Object(m.jsxs)(l.a,{flex:"1",height:"100%",width:"100%",children:[Object(m.jsx)("div",{className:"map-tooltip"}),Object(m.jsx)("svg",{className:"map-container",id:"map-container",height:"100%",width:"100%",children:Object(m.jsx)("g",{className:"shapes",children:Object(m.jsx)(ge,{data:a,countries:d,setCountries:u,mapClicked:o,setMapClicked:c,regionsAvailable:h})})})]})})}),Object(m.jsx)(ae.e,{children:Object(m.jsx)(Z.a,{mr:3,colorScheme:"teal",onClick:function(){t(n.length),i(d),r()},children:Object(m.jsx)("a",{href:"#graphArea",children:"Continue"})})})]})},Oe=function(e){var t,n=e.countries,i=e.setCountries,a=e.setMapClicked,r=e.G20EUR,o=e.arraySame;return Object(m.jsxs)(J.a,{children:[Object(m.jsx)(J.h,{children:Object(m.jsx)(Z.a,{marginInline:"2%",colorScheme:"teal",leftIcon:Object(m.jsx)(oe.a,{}),children:" Selection Options "})}),Object(m.jsxs)(J.e,{children:[Object(m.jsx)(J.b,{}),Object(m.jsx)(J.d,{}),Object(m.jsx)(J.g,{children:"Selection by Group"}),Object(m.jsx)(J.c,{children:Object(m.jsx)(Z.a,{alignSelf:"center",leftIcon:Object(m.jsx)(g.b,{}),margin:"2%",mr:3,colorScheme:"orange",onClick:function(){o([r,n])||n===[]?i(n.filter((function(e){return!r.includes(e)}))):(t=r.filter((function(e){return!n.includes(e)})),i([].concat(Object(re.a)(n),Object(re.a)(t)))),a(!0)},children:o([r,n])?"Deselect G20":" Select G20"})}),Object(m.jsx)(J.f,{})]})]})},ye=void 0,ve=function(e){var t,n=e.data.country,i=e.setCountries,a=e.countries,r=e.mapClicked,o=e.setMapClicked,c=e.regionsAvailable,l=e.height,s=e.width,d=Object(b.g)().center([13,52]).translate([s/2,l/2]).scale([s/1.5]),u=Object(b.h)(d),h=Object(b.f)(),f=Object(b.r)(".map-container"),x=Object(b.r)(".shapes");f.call(Object(b.t)().scaleExtent([.9,10]).translateExtent([[0,-40],[900,500]]).on("zoom",(function(e){x.attr("transform",e.transform)})));var j=Object(b.r)(".map-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("path",{className:"graticules",d:u(h())}),n.features.map((function(e){return Object(m.jsx)("path",{className:"country",id:e.properties.name,d:u(e),fill:c.includes(e.properties.name)?"#137B80":"#ebf4f4",onClick:function(){if(c.includes(e.properties.name)){var t=a.indexOf(e.properties.name);F=a.includes(e.properties.name)?a.filter((function(e){return a.indexOf(e)!==t})):[].concat(Object(re.a)(a),[e.properties.name]),i(F)}else console.log("Data not available !")},strokeWidth:.09,opacity:a.includes(e.properties.name)?.6:1,stroke:"black",onMouseOver:function(e){t=e.target.id,j.html("<div>".concat(t,"</div>")).style("visibility","visible"),Object(b.r)(ye).transition().attr("fill","#eec42d")},onMouseMove:function(e){j.style("top",e.nativeEvent.layerY+30+"px").style("left",e.nativeEvent.layerX+"px")},onMouseOut:function(){j.html("").style("visibility","hidden"),Object(b.r)(ye).transition().attr("fill","#437c90")}},e.id)}))," /",Object(m.jsx)("rect",{height:"100%",width:"100%",fill:r?"none":"grey",opacity:"0.3",onClick:function(){o(!0)}}),Object(m.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",className:"pretext",fill:"none",stroke:r?"none":"black",onClick:function(){o(!0)},children:"Drag around the map and click to select a country."}),Object(m.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",fill:"none",stroke:r?"none":"black",children:"Click here to start."})]})},Ce=function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1],a=0;if(null==n||null==i)return!1;if(0===n.length&&0!==i.length||0!==n.length&&0===i.length)return!1;if(0===n.length&&0===i.length)return!0;for(var r=0;r<n.length;r++)for(var c=0;c<i.length;c++)n[r]===i[c]&&(a+=1);return a===n.length},ke=function(e){var t=e.setlength,n=e.onClicked,i=e.setOnClicked,a=e.data,r=e.onClose,o=e.mapClicked,c=e.setMapClicked,d=e.countries,u=e.setCountries,h=e.width,f=e.height,b=e.regionsAvailable;if(!a)return Object(m.jsx)("pre",{children:"Loading..."});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ae.f,{children:["Select a country:",Object(m.jsx)(Oe,{countries:d,setCountries:u,G20EUR:["Turkey","Germany","Italy","Europe","United Kingdom","France","Russia"],onClose:r,arraySame:Ce,setMapClicked:c,buttonWidth:"50%"}),Object(m.jsx)(Z.a,{mr:3,leftIcon:Object(m.jsx)(oe.b,{}),colorScheme:"red",onClick:function(){u([]),c(!0)},children:"Clear Selection"})]}),Object(m.jsx)(ae.c,{}),Object(m.jsx)(ae.b,{height:"100%",children:Object(m.jsx)(s.a,{display:"flex","flex-direction":"column",height:"100%",width:"100%",children:Object(m.jsxs)(l.a,{className:"map-div",flex:"1",height:"100%",width:"100%",children:[Object(m.jsx)("div",{className:"map-tooltip"}),Object(m.jsx)("svg",{className:"map-container",id:"map-container",height:"100%",width:"100%",children:Object(m.jsx)("g",{className:"shapes",children:Object(m.jsx)(ve,{data:a,countries:d,setCountries:u,mapClicked:o,setMapClicked:c,height:f,width:h,regionsAvailable:b})})})]})})}),Object(m.jsx)(ae.e,{children:Object(m.jsx)(Z.a,{mr:3,colorScheme:"teal",onClick:function(){t(n.length),i(d),r()},children:Object(m.jsx)("a",{href:"#graphArea",children:"Continue"})})})]})},_e=function(e){var t=e.setlength,n=e.onClicked,i=e.setOnClicked,a=e.data,r=e.onClose,o=e.mapClicked,c=e.setMapClicked,l=e.countries,s=e.setCountries,d=e.mapSelect,u=e.width,h=e.height,f=["South Africa","Indonesia","Saudi Arabia","Australia","India","China","Japan","South Korea","Turkey","Mexico","United States of America","Germany","Russia","Argentina","Italy","Europe","United Kingdom","Canada","Brazil","France"];return"World"===d?Object(m.jsx)(be,{setlength:t,onClicked:n,setOnClicked:i,data:a,onClose:r,mapClicked:o,setMapClicked:c,countries:l,setCountries:s,regionsAvailable:f}):"United States"===d?Object(m.jsx)(me,{setlength:t,onClicked:n,setOnClicked:i,data:a,onClose:r,mapClicked:o,setMapClicked:c,countries:l,setCountries:s,regionsAvailable:f}):"Europe"===d?Object(m.jsx)(ke,{setlength:t,onClicked:n,setOnClicked:i,data:a,onClose:r,mapClicked:o,setMapClicked:c,countries:l,setCountries:s,height:h,width:u,regionsAvailable:f}):void 0},Ve=function(e){var t=e.setlength,n=e.onClicked,a=e.setOnClicked,r=e.modalHeight,c=e.tooltip,l=function(){var e=Object(i.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){Object(b.i)("https://unpkg.com/world-atlas@2.0.2/countries-50m.json").then((function(e){Object(b.i)("https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json").then((function(t){a({state:Object(ie.a)(t,t.objects.states),country:Object(ie.a)(e,e.objects.countries)})}))}))}),[]),n}(),d=Object(A.a)(),u=d.isOpen,h=d.onOpen,f=d.onClose,x=Object(i.useState)(!1),j=Object(o.a)(x,2),p=j[0],g=j[1],O=Object(i.useState)(n),y=Object(o.a)(O,2),v=y[0],C=y[1],k=Object(i.useState)("World"),_=Object(o.a)(k,2),V=_[0],w=_[1],E=[{type:"World",title:"Country"},{type:"United States",title:"State"},{type:"Europe",title:"Country"}];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(s.a,{className:"buttonSpace",width:"90%",children:[Object(m.jsx)(s.a,{className:"column",width:"40%",justifyContent:"center",children:Object(m.jsx)(G,{label:"Select Map:",options:E.reduce((function(e,t){return e.push(t.type),e}),[]),id:"menuDrop",selectedValue:V,onSelectedValueChange:w,width:"90%",tooltip:c})}),Object(m.jsx)(T.a,{children:Object(m.jsxs)(Z.a,{width:"100%",bg:"purple.500",color:"white",_hover:{bg:"purple.700"},_focus:{boxShadow:"outline"},onClick:function(){h(),g(!1)},children:["Select ",E[E.reduce((function(e,t){return e.push(t.type),e}),[]).indexOf(V)].title]})})]}),Object(m.jsxs)(ae.a,{isOpen:u,onClose:f,children:[Object(m.jsx)(ae.g,{}),Object(m.jsx)(ae.d,{maxW:document.body.clientWidth/2,height:r,children:Object(m.jsx)(_e,{setlength:t,onClicked:n,setOnClicked:a,data:l,onClose:f,mapClicked:p,setMapClicked:g,countries:v,setCountries:C,mapSelect:V,height:r,width:document.body.clientWidth/2})})]})]})},we=function(e){var t=e.totalCellArea,n=e.nominalPower,i=e.vehicle_footprint_m2,a=e.graphWidth;return Object(m.jsxs)(s.a,{background:"#003E74",color:"white",alignSelf:"center",fontWeight:"bold",width:"100%",height:a>580?"10px":a>520?"70px":"100px",paddingBlock:"30px",display:"flex",direction:"row",justifyContent:"center",alignItems:"center",children:[Object(m.jsxs)(u.a,{paddingInline:"20px",textAlign:"center",children:["PV Nominal Power: ".concat(n.toFixed(2)," Wp"),"  "]}),Object(m.jsx)(u.a,{paddingInline:"20px",textAlign:"center",children:" EV Area available for PV Integration: ".concat(i.toFixed(2)," m\xb2")}),Object(m.jsx)(u.a,{paddingInline:"20px",textAlign:"center",children:" Total Cell-Area: ".concat(t.toFixed(2)," m\xb2")}),Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"top",padding:"10px",borderRadius:"7px",label:"Nominal power refers to the power output of the EV with PV, and the cell-area refers to the area of the car covered by PV cells. These variables are used are calculated from the variables above.",children:Object(m.jsx)("span",{children:Object(m.jsx)(x.a,{as:p.a,paddingBottom:"1px",marginInline:"5px",_hover:{opacity:.3}})})})]})},Ae=function(e){var t,n=e.onClicked,i=e.setOnClicked,a=e.caseOption,r=e.setCaseOption,o=e.VKToption,c=e.setVKTOption,l=e.PV_performanceRatio,u=e.setPV_performanceRatio,h=e.PV_CellNominalEffiency,f=e.setPV_CellNominalEffiency,b=e.cellArea_ratio,x=e.setCellArea_ratio,j=e.modalHeight,p=e.setlength,g=e.graphWidth,O=["High Case","Medium Case","Low Case"],y=O.indexOf(a[0]);!1===a[1]?([280,200,150][y],t=[4.3,4.3,3.68][y]):(a[2],t=a[3]);var v=t*b/100,C=h/100*1e3*153.3/1e4*Math.floor(1e4*v/153.3);return Object(m.jsxs)(s.a,{className:"UI-box",borderRadius:"none",borderWidth:"1px",borderColor:"grey.100",direction:"column",width:"100%",alignItems:"center",justifyContent:"center",bg:"#fbfbfb",padding:"0%",children:[Object(m.jsx)(T.a,{width:"100%",height:"70px",bg:"#003E74",color:"white",children:Object(m.jsx)(d.a,{fontSize:"14pt",children:" Choose your Options: "})}),Object(m.jsx)(Ve,{setlength:p,setOnClicked:i,modalHeight:j,onClicked:n,tooltip:"Here you can select which countries to look at on the map. Click the select button to open it up."}),Object(m.jsx)(ee,{label:"Select EV Type:",options:O,selectedValue:a,onSelectedValueChange:r,tooltip:"Here you can select the vehicle footprint and efficency either by low-high or custom"}),Object(m.jsx)(te,{label:"VKT per year:",min:12e3,max:21e3,selectedValue:o,onSelectedValueChange:c,tooltip:"Here you can select the vehicle kilometres travelled: either specific for each region or a universal custom average"}),Object(m.jsx)(ne,{label:"Performance Ratio:",min:40,max:95,selectedValue:l,onSelectedValueChange:u,tooltip:"This sets the cell performance ratio: the ratio between the theoretical and actual output of the cell."}),Object(m.jsx)(ne,{label:"PV Cell Efficiency:",min:15,max:35,selectedValue:h,onSelectedValueChange:f,tooltip:"Select how efficient one photovoltaic cell is, i.e. energy losses."}),Object(m.jsx)(ne,{label:"Cell-Area Ratio:",min:70,max:95,selectedValue:b,onSelectedValueChange:x,tooltip:"Choose how much of the car's footprint is covered by PV cells."}),Object(m.jsx)(we,{totalCellArea:v,nominalPower:C,vehicle_footprint_m2:t,graphWidth:g})]})},Ee=function(e){var t=e.graphWidth,n=e.dataRaw,a=e.modalHeight,r=e.text,c=Object(i.useState)(["United States of America"]),l=Object(o.a)(c,2),d=l[0],u=l[1],h=Object(i.useState)(d.length),f=Object(o.a)(h,2),b=f[0],x=f[1],j=Object(i.useState)(["Medium Case",!1,150,3]),p=Object(o.a)(j,2),g=p[0],O=p[1],y=Object(i.useState)([15e3,!1]),v=Object(o.a)(y,2),C=v[0],k=v[1],_=Object(i.useState)(85),V=Object(o.a)(_,2),w=V[0],A=V[1],E=Object(i.useState)(25),T=Object(o.a)(E,2),S=T[0],W=T[1],I=Object(i.useState)(77.5),N=Object(o.a)(I,2),P=N[0],G=N[1];return Object(m.jsxs)(s.a,{className:"row",height:"auto",margin:"2%",children:[Object(m.jsx)(s.a,{className:"column",width:"40%",children:Object(m.jsx)(Ae,{onClicked:d,setOnClicked:u,caseOption:g,setCaseOption:O,VKToption:C,setVKTOption:k,PV_performanceRatio:P,setPV_performanceRatio:G,PV_CellNominalEffiency:S,setPV_CellNominalEffiency:W,cellArea_ratio:w,setCellArea_ratio:A,modalHeight:a,setlength:x,graphWidth:t})}),Object(m.jsx)(s.a,{className:"column",width:"60%",children:Object(m.jsx)(X,{onClicked:d,graphWidth:t,dataLength:b,VKToption:C,dataRaw:n,cellArea_ratio:w,caseOption:g,PV_performanceRatio:P,PV_CellNominalEffiency:S,text:r})})]})},Te=function(e){var t=e.colorScale,n=e.selection,i=e.duration,a=e.position,r=e.data,o=e.abbrev,c=e.radius,l=e.legHov,s=e.onLegHov,d=e.legClick,u=e.onLegClick,h=n.selectAll(".legend").data([null]).join("g").classed("legend",!0).attr("transform","translate".concat(a)).style("z-index","10");h.selectAll(".leg").data(r).join((function(e){var n=e.append("g").classed("leg",!0).attr("transform",(function(e,t){return"translate(0,".concat(t*c*4,")")}));return n.append("rect").attr("x",2*-c).attr("y",2*-c).attr("width",60).attr("height",4*c).style("fill","#fff").attr("opacity",.1),n.append("circle").style("fill",(function(e,n){return t(n)})).attr("r",0),n.append("text").attr("opacity",0).text((function(e){return o(e)})).attr("transform","translate(".concat(2*c,",0)")).attr("dy",".32em"),n}),(function(e){return e}),(function(e){e.transition().duration(i).remove()})).on("mouseover",(function(e){s(o(e.target.__data__))})).on("click",(function(e){d!==o(e.target.__data__)?u(o(e.target.__data__)):u(null)})).on("mouseout",(function(e){s(null)})).transition().duration(.1*i).attr("opacity",(function(e){return d||l?d===o(e)||l===o(e)?1:.3:1})),h.selectAll(".leg").selectAll("circle").transition().duration(i).attr("r",c),h.selectAll(".leg").selectAll("text").transition().duration(i).attr("opacity",1)};b.s.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var Se=function(e){for(var t=e.graphWidth,n=e.dataOriginal,a=e.xAxisTitle,r=e.yAxisTitle,o=e.Title,c=e.xValue,l=e.yValue,s=e.xTitleOffset,d=e.yTitleOffset,u=e.titleOffset,h=e.colorTheme,f=e.radius,x=e.toolTipText1,j=e.formatNumber1,p=e.toolTipText2,g=e.formatNumber2,O=e.height,y=e.abbrev,v=e.legHov,C=e.onLegHov,k=e.legClick,_=e.onLegClick,V=e.chartColour,w=e.axisSize,A=e.margin,E=2e3,T=t,S=n.filter((function(e){return c(e)})),W=T-A.left-A.right,I=O-A.top-A.bottom,N=Object(i.useRef)(),P=[],G=0;G<S.length;G++){for(var z=[],H=0;H<S[0].Year.length;H++){var M={};M.Year=S[G].Year[H],M.EV_Usage_Emissions_Years=S[G].EV_Usage_Emissions_Years[H],M.PVonEV_usageEmissions_Years=S[G].PVonEV_usageEmissions_Years[H],z.push(M)}P.push(z)}var R=P;Object(i.useEffect)((function(){L()}),[S]);var L=function(){var e=0,n=0;S.map((function(t){n<Object(b.k)(l(t))&&(n=Object(b.k)(l(t))),e<Object(b.k)(c(t))&&(e=Object(b.k)(c(t)))}));var i=Object(b.n)().domain([0,e]).range([0,W]).nice(),m=Object(b.n)().domain([0,n]).range([I,0]).nice(),O=Object(b.a)().scale(i).tickSizeInner(-I).tickPadding(10),A=Object(b.b)().scale(m).tickSizeInner(-W).tickPadding(10),T=Object(b.o)(h),P=Object(b.r)(N.current).select("g"),G=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");P.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",W).attr("height",I).style("fill",V).on("click",(function(){_(null)}));var z=P.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),H=P.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);z.selectAll(".x-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("x-axis",!0).attr("transform","translate(0,".concat(I,")"))}),(function(e){return e}),(function(e){return e.transition().duration(E).remove()})).transition().duration(E).call(O),0===z.select(".tick text").text()&&z.select(".tick line").remove(),z.selectAll(".x-axis-title").data([a]).join("text").classed("x-axis-title",!0).attr("x",W/2).attr("y",I+s).style("font-size",w).attr("fill","black").style("text-anchor","middle").text((function(e){return e})),H.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(E).remove()})).transition().duration(E).call(A),H.selectAll(".y-axis-title").data([r]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",d).attr("opacity",1).style("font-size",w).attr("transform","translate(".concat(d,", ").concat(I/2,") rotate(-90)")).attr("fill","#000").style("text-anchor","middle").text((function(e){return e})),H.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(E).remove()})).transition().duration(E).attr("fill","none").attr("d","M0,0V".concat(I," H").concat(W)).attr("stroke","black"),P.selectAll(".chart-title").data([o]).join("text").classed("chart-title",!0).attr("x",W/2).attr("y",u).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e}));for(var M=Object(b.j)().x((function(e){return i(c(e))})).y((function(e){return m(l(e))})),L=function(e){var t=P.selectAll(".".concat(S[e].abbrev,"Marks")).data(R[e]).join((function(t){return t.append("circle").classed("".concat(S[e].abbrev,"Marks"),!0).attr("cy",(function(e){return m(l(e))})).attr("cx",(function(e){return i(c(e))})).attr("r",0)}),(function(e){return e}),(function(e){return e.transition().duration(E).attr("r",0).remove()})).style("fill",(function(){return T(e)})).on("mouseover",(function(e){var t=e.target.__data__;G.html("<div>".concat(t.Year,":</div><div>").concat(x+c(t).toFixed(2)," ").concat(j,"</div><div>").concat(p+l(t).toFixed(2)," ").concat(g,"</div>")).style("visibility","visible"),Object(b.r)(undefined).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){G.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){G.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));t.transition("opac").duration(400).attr("opacity",(function(){return k===y(S[e])?.8:v?v===y(S[e])?.8:.2:k||v?.2:.8})),t.transition("pos").duration(E).attr("cy",(function(e){return m(l(e))})).attr("cx",(function(e){return i(c(e))})).attr("r",f);var n=P.selectAll(".".concat(S[e].abbrev,"Line")).data([null]).join((function(t){return t.append("path").classed("".concat(S[e].abbrev,"Line"),!0).attr("fill","none")}),(function(e){return e}),(function(e){return e.transition().duration(E).remove()})).style("stroke",T(e)).style("stroke-width",2);n.transition("appear").duration(E).attr("d",(function(t){return M(R[e])})),n.transition("opac").duration(400).attr("opacity",(function(){return k===y(S[e])?1:v?v===y(S[e])?1:.2:k||v?.2:1}))},Y=0;Y<R.length;Y++)L(Y);Te({colorScale:T,selection:P,duration:E,data:S,abbrev:y,position:"(".concat(t-250,",").concat(I-100,")"),radius:5,legHov:v,onLegHov:C,legClick:k,onLegClick:_}),P.selectAll(".legend").moveToFront()};return Object(m.jsxs)("div",{id:"linechart",children:[Object(m.jsx)("svg",{className:"chart",width:T,height:O,ref:N,children:Object(m.jsx)("g",{transform:"translate(".concat(A.left,", ").concat(A.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})};b.s.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var We=function(e){for(var t=e.graphWidth,n=e.dataOriginal,a=e.xAxisTitle,r=e.yAxisTitle,o=e.Title,c=e.xValue,l=e.yValue,s=e.xTitleOffset,d=e.yTitleOffset,u=e.titleOffset,h=e.colorTheme,f=e.radius,x=e.country,j=e.toolTipText1,p=e.formatNumber1,g=e.toolTipText2,O=e.formatNumber2,y=e.height,v=e.abbrev,C=e.legHov,k=e.onLegHov,_=e.legClick,V=e.onLegClick,w=e.chartColour,A=e.axisSize,E=e.margin,T=2e3,S=t,W=n.filter((function(e){return l(e)})),I=S-E.left-E.right,N=y-E.top-E.bottom,P=Object(i.useRef)(),G=[],z=0;z<W.length;z++){for(var H=[],M=0;M<W[0].Year.length;M++){var R={};R.Year=W[z].Year[M],R.EV_Usage_Emissions_Years=W[z].EV_Usage_Emissions_Years[M],R.PVonEV_usageEmissions_Years=W[z].PVonEV_usageEmissions_Years[M],R.CIEG_gCO2_kWh_Years=W[z].CIEG_gCO2_kWh_Years[M],H.push(R)}G.push(H)}var L=G;Object(i.useEffect)((function(){Y()}),[W]);var Y=function(){var e=0;W.map((function(t){e<Object(b.k)(l(t))&&(e=Object(b.k)(l(t)))}));var t=Object(b.n)().domain(Object(b.c)(W[0].Year)).range([0,I]).nice(),n=Object(b.n)().domain([0,e]).range([N,0]).nice(),i=Object(b.a)().scale(t).tickSizeInner(-N).tickPadding(10).tickFormat(Object(b.d)("d")),m=Object(b.b)().scale(n).tickSizeInner(-I).tickPadding(10),y=Object(b.o)(h).domain(W.map((function(e,t){return t}))),E=Object(b.r)(P.current).select("g"),S=Object(b.r)(".tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").style("padding","10px").style("background","rgba(0,0,0,0.6)").style("border-radius","4px").style("color","#fff").text("a simple tooltip");E.selectAll(".background").data([null]).join("rect").classed("background",!0).attr("width",I).attr("height",N).style("fill",w).on("click",(function(){V(null)}));var G=E.selectAll(".xAxisGroup").data([null]).join("g").classed("xAxisGroup",!0),z=E.selectAll(".yAxisGroup").data([null]).join("g").classed("yAxisGroup",!0);G.selectAll(".x-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("x-axis",!0).attr("transform","translate(0,".concat(N,")"))}),(function(e){return e}),(function(e){return e.transition().duration(T).remove()})).transition().duration(T).call(i),0===G.select(".tick text").text()&&G.select(".tick line").remove(),G.selectAll(".x-axis-title").data([a]).join("text").classed("x-axis-title",!0).attr("x",I/2).attr("y",N+s).style("font-size",A).attr("fill","black").style("text-anchor","middle").text((function(e){return e})),z.selectAll(".y-axis").data([null]).join((function(e){return e.append("g").style("font-size","0.9em").classed("y-axis",!0).attr("transform","translate(0,0)")}),(function(e){return e}),(function(e){return e.transition().duration(T).remove()})).transition().duration(T).call(m),z.selectAll(".y-axis-title").data([r]).join("text").classed("y-axis-title",!0).attr("x",0).attr("y",d).attr("opacity",1).style("font-size",A).attr("transform","translate(".concat(d,", ").concat(N/2,") rotate(-90)")).attr("fill","#000").style("text-anchor","middle").text((function(e){return e})),z.selectAll(".xydomain").data([null]).join((function(e){return e.append("path").classed("xydomain",!0)}),(function(e){return e}),(function(e){return e.transition().duration(T).remove()})).transition().duration(T).attr("fill","none").attr("d","M0,0V".concat(N," H").concat(I)).attr("stroke","black"),E.selectAll(".chart-title").data([o]).join("text").classed("chart-title",!0).attr("x",I/2).attr("y",u).attr("fill","#000").style("font-size","14px").style("text-anchor","middle").text((function(e){return e}));for(var H=Object(b.j)().x((function(e){return t(c(e))})).y((function(e){return n(l(e))})),M=function(e){var i=E.selectAll(".".concat(W[e].abbrev,"Marks")).data(L[e]).join((function(i){return i.append("circle").classed("".concat(W[e].abbrev,"Marks"),!0).attr("cy",(function(e){return n(l(e))})).attr("cx",(function(e){return t(c(e))})).attr("r",0)}),(function(e){return e}),(function(e){return e.transition().duration(T).attr("r",0).remove()})).style("fill",(function(){return y(e)})).on("mouseover",(function(t){var n=t.target.__data__;S.html("<div>".concat(x(W[e]),":</div><div>").concat(j+c(n).toFixed(0)," ").concat(p,"</div><div>").concat(g+l(n).toFixed(2)," ").concat(O,"</div>")).style("visibility","visible"),Object(b.r)(undefined).transition().attr("fill","#eec42d")})).on("mousemove",(function(e){S.style("top",e.pageY-10+"px").style("left",e.pageX+10+"px")})).on("mouseout",(function(){S.html("").style("visibility","hidden"),Object(b.r)(this).transition().attr("fill","#437c90")}));i.transition("opac").duration(400).attr("opacity",(function(){return _===v(W[e])?.9:C?C===v(W[e])?.9:.2:_||C?.2:.9})),i.transition("pos").duration(T).attr("cy",(function(e){return n(l(e))})).attr("cx",(function(e){return t(c(e))})).attr("r",f);var a=E.selectAll(".".concat(W[e].abbrev,"Line")).data([null]).join((function(t){return t.append("path").classed("".concat(W[e].abbrev,"Line"),!0).attr("opacity",0).attr("fill","none")}),(function(e){return e}),(function(e){return e.transition().duration(T).remove()})).style("stroke",y(e)).style("stroke-width",2);a.transition("appear").duration(T).attr("d",(function(t){return H(L[e])})),a.transition("opac").duration(400).attr("opacity",(function(){return _===v(W[e])?1:C?C===v(W[e])?1:.2:_||C?.2:1}))},R=0;R<L.length;R++)M(R);Te({colorScale:y,selection:E,duration:T,data:W,abbrev:v,position:"(".concat(I-100,",20)"),radius:5,legHov:C,onLegHov:k,legClick:_,onLegClick:V}),E.selectAll(".legend").moveToFront()};return Object(m.jsxs)("div",{id:"linechart",children:[Object(m.jsx)("svg",{className:"chart",width:S,height:y,ref:P,children:Object(m.jsx)("g",{transform:"translate(".concat(E.left,", ").concat(E.top,")")})}),Object(m.jsx)("div",{className:"tooltip"})]})},Ie=function(e){var t=e.dataOriginal,n=e.graph,a=e.graphWidth,r=e.attributes,c=450,l=Object(i.useState)(null),d=Object(o.a)(l,2),h=d[0],f=d[1],x=Object(i.useState)(null),j=Object(o.a)(x,2),p=j[0],g=j[1],O="1em",y="rgba(235, 238, 238, 0.5)",v=-30,C={top:30,bottom:80,left:80,right:30};return n===r[0]?Object(m.jsx)(Se,{graphWidth:a,height:c,dataOriginal:t,xAxisTitle:"PV on EV Emissions [gCO2e/kWh]",yAxisTitle:"EV Emissions [gCO2e/kWh]",Title:"",xValue:function(e){return e.PVonEV_usageEmissions_Years},yValue:function(e){return e.EV_Usage_Emissions_Years},xTitleOffset:50,yTitleOffset:v,titleOffset:20,chartColour:y,axisSize:O,margin:C,colorTheme:b.q,radius:5,country:function(e){return e.region},toolTipText1:"x: ",toolTipText2:"y: ",formatNumber1:"",formatNumber2:"",abbrev:function(e){return e.abbrev},legHov:h,onLegHov:f,legClick:p,onLegClick:g}):n===r[1]?Object(m.jsx)(We,{graphWidth:a,height:c,dataOriginal:t,xAxisTitle:"Year",yAxisTitle:"EV Emissions [gCO2e/kWh]",Title:"",xValue:function(e){return e.Year},yValue:function(e){return e.EV_Usage_Emissions_Years},xTitleOffset:50,yTitleOffset:v,titleOffset:20,chartColour:y,axisSize:O,margin:C,colorTheme:b.q,radius:5,country:function(e){return e.region},toolTipText1:"Year: ",toolTipText2:"Value: ",formatNumber1:"",formatNumber2:"",abbrev:function(e){return e.abbrev},legHov:h,onLegHov:f,legClick:p,onLegClick:g}):n===r[2]?Object(m.jsx)(We,{graphWidth:a,height:c,dataOriginal:t,xAxisTitle:"Year",yAxisTitle:"PV on EV Emissions [gCO2e/kWh]",Title:"",xValue:function(e){return e.Year},yValue:function(e){return e.PVonEV_usageEmissions_Years},xTitleOffset:50,yTitleOffset:v,titleOffset:20,chartColour:y,axisSize:O,margin:C,colorTheme:b.q,radius:5,country:function(e){return e.region},toolTipText1:"Year: ",toolTipText2:"Value: ",formatNumber1:"",formatNumber2:"",abbrev:function(e){return e.abbrev},legHov:h,onLegHov:f,legClick:p,onLegClick:g}):n===r[3]?Object(m.jsx)(We,{graphWidth:a,height:c,dataOriginal:t,xAxisTitle:"Year",yAxisTitle:"CIEG [gCO2e/kWh]",Title:"",xValue:function(e){return e.Year},yValue:function(e){return e.CIEG_gCO2_kWh_Years},xTitleOffset:50,yTitleOffset:v,titleOffset:20,chartColour:y,axisSize:O,margin:C,colorTheme:b.q,radius:5,country:function(e){return e.region},toolTipText1:"Year: ",toolTipText2:"Value: ",formatNumber1:"",formatNumber2:"",abbrev:function(e){return e.abbrev},legHov:h,onLegHov:f,legClick:p,onLegClick:g}):Object(m.jsx)(s.a,{alignItems:"center",width:document.body.clientWidth/2,children:Object(m.jsx)(u.a,{children:"invalid"})})},Ne=function(e){var t=e.graphWidth,n=e.VKToption,a=e.dataRaw,r=e.cellArea_ratio,c=e.caseOption,d=e.PV_performanceRatio,h=e.PV_CellNominalEffiency,f=e.text,b=new Array,x=new Array;for(var j in f)f[j].title&&(b.push(f[j].title),x.push(f[j].desc));var p=q({data:a,VKToption:n,PV_CellNominalEffiency:h/100,cellArea_ratio:r/100,caseOption:c,PV_performanceRatio:d/100,useStat:!1}),g=Object(i.useState)("EV vs PV-on-EV Emissions over time"),O=Object(o.a)(g,2),y=O[0],v=O[1];return Object(m.jsxs)(s.a,{borderWidth:"0px",direction:"column",width:"100%",height:"95%",alignItems:"center",justifyContent:"center",background:"#fffff",children:[Object(m.jsx)(s.a,{mt:"2%",width:"100%",children:Object(m.jsx)(G,{label:"Select Graph:",options:b,id:"menuDrop",selectedValue:y,onSelectedValueChange:v,width:"100%",tooltip:"Here you can select different graphs to look at."})}),Object(m.jsx)(u.a,{paddingInline:"2%",marginBlock:"2%",marginInline:"8%",background:"white",children:x[b.indexOf(y)]}),Object(m.jsx)(l.a,{id:"box",flex:"1",height:"90%",width:"95%",marginInline:"1%",children:Object(m.jsx)(Ie,{dataOriginal:p,graph:y,graphWidth:t,attributes:b})})]})},Pe=function(e){var t,n=e.caseOption,i=e.setCaseOption,a=e.VKToption,r=e.setVKTOption,o=e.PV_performanceRatio,c=e.setPV_performanceRatio,l=e.PV_CellNominalEffiency,u=e.setPV_CellNominalEffiency,h=e.cellArea_ratio,f=e.setCellArea_ratio,b=e.graphWidth,x=["High Case","Medium Case","Low Case"],j=x.indexOf(n[0]);!1===n[1]?([280,200,150][j],t=[4.3,4.3,3.68][j]):(n[2],t=n[3]);var p=t*h/100,g=l/100*1e3*153.3/1e4*Math.floor(1e4*p/153.3);return Object(m.jsxs)(s.a,{className:"UI-box",borderRadius:"none",direction:"column",width:"100%",alignItems:"center",justifyContent:"center",background:"#fbfbfb",padding:"0%",borderWidth:"1px",borderColor:"grey.100",children:[Object(m.jsx)(T.a,{width:"100%",height:"70px",bg:"#003E74",color:"white",borderTopRadius:"none",children:Object(m.jsx)(d.a,{fontSize:"14pt",children:" Choose your Options: "})}),Object(m.jsx)(ee,{label:"Select EV Type:",options:x,selectedValue:n,onSelectedValueChange:i,tooltip:"Here you can select the vehicle footprint and efficency either by low-high or custom"}),Object(m.jsx)(te,{label:"VKT per year:",min:12e3,max:21e3,selectedValue:a,onSelectedValueChange:r,tooltip:"Here you can select the vehicle kilometres travelled: either specific for each region or a universal custom average"}),Object(m.jsx)(ne,{label:"Performance Ratio:",min:40,max:95,selectedValue:o,onSelectedValueChange:c,tooltip:"This sets the cell performance ratio: the ratio between the theoretical and actual output of the cell."}),Object(m.jsx)(ne,{label:"PV Cell Efficiency:",min:15,max:35,selectedValue:l,onSelectedValueChange:u,tooltip:"Select how efficient one photovoltaic cell is, i.e. energy losses."}),Object(m.jsx)(ne,{label:"Cell-Area Ratio:",min:70,max:95,selectedValue:h,onSelectedValueChange:f,tooltip:"Choose how much of the car's footprint is covered by PV cells."}),Object(m.jsx)(we,{totalCellArea:p,nominalPower:g,vehicle_footprint_m2:t,graphWidth:b})]})},Ge=function(e){var t=e.graphWidth,n=e.dataRaw,a=e.text,r=Object(i.useState)(["Medium Case",!1,150,3]),c=Object(o.a)(r,2),l=c[0],d=c[1],u=Object(i.useState)([18e3,!1]),h=Object(o.a)(u,2),f=h[0],b=h[1],x=Object(i.useState)(85),j=Object(o.a)(x,2),p=j[0],g=j[1],O=Object(i.useState)(25),y=Object(o.a)(O,2),v=y[0],C=y[1],k=Object(i.useState)(77.5),_=Object(o.a)(k,2),V=_[0],w=_[1];return Object(m.jsxs)(s.a,{className:"row",height:"auto",margin:"2%",children:[Object(m.jsx)(s.a,{className:"column",width:"40%",children:Object(m.jsx)(Pe,{caseOption:l,setCaseOption:d,VKToption:f,setVKTOption:b,PV_performanceRatio:V,setPV_performanceRatio:w,PV_CellNominalEffiency:v,setPV_CellNominalEffiency:C,cellArea_ratio:p,setCellArea_ratio:g,graphWidth:t})}),Object(m.jsx)(s.a,{id:"graphArea2",className:"column",width:"60%",children:Object(m.jsx)(Ne,{graphWidth:t,dataRaw:n,VKToption:f,cellArea_ratio:p,caseOption:l,PV_performanceRatio:V,PV_CellNominalEffiency:v,text:a})})]})},ze=n(361),He=Object(ze.a)({fonts:{heading:"firasans,Helvetica Neue,Arial,sans-serif",body:"firasans,Helvetica Neue,Arial,sans-serif"},colors:{popup:{100:"#66A40A",900:"#3c6105"}}}),Me=function(e){var t=e.text;return Object(m.jsxs)(s.a,{marginInline:"2%",padding:"3%",className:"row",background:"white",children:[Object(m.jsx)(u.a,{children:t.p1}),Object(m.jsx)("br",{}),Object(m.jsx)(u.a,{children:t.p2}),Object(m.jsx)("br",{}),Object(m.jsx)(u.a,{children:t.p3}),Object(m.jsx)("br",{}),Object(m.jsxs)(u.a,{children:["I have tried to design this website so that it can be easily understood by anyone, and so I have left some helpful pointers. Whenever there is a",Object(m.jsx)(j.a,{hasArrow:!0,textAlign:"top",padding:"10px",borderRadius:"7px",label:"Hello there!",children:Object(m.jsx)("span",{children:Object(m.jsx)(x.a,{as:p.a,paddingBottom:"1px",marginInline:"5px",_hover:{opacity:.3}})})}),"next to something, you can hover over it and it will give small explanation of what it does. Have a go now!"]})]})},Re=function(){var e=Object(i.useState)(document.body.clientWidth/2.5),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(.8*window.innerHeight),x=Object(o.a)(r,2),j=x[0],p=x[1];Object(i.useEffect)((function(){var e=function(){a(document.body.clientWidth/2.2),p(.8*window.innerHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var g=function(){var e=Object(i.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){Object(b.i)("https://gist.githubusercontent.com/anujan-k19/104a77c464deeff471758951ca800265/raw/dae2ed0d1625764cd005d7cdfad933baab256219/contentData.json",(function(e){return e.Annual_GHI_kWh_m2=+e.Annual_GHI_kWh_m2,e.CIEG2013_gCO2e_kWh=+e.CIEG2013_gCO2e_kWh,e.Electricity_cost_USD_kWh=+e.Electricity_cost_USD_kWh,e.ICEV_usage_emissions_gCO2e_km=+e.ICEV_usage_emissions_gCO2e_km,e.Share_of_diesel_gasoline_vehicles=+e.Share_of_diesel_gasoline_vehicles,e.VKTstat=+e.VKTstat,e})).then((function(e){a(e)}))}),[]),n}();return g?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(c.a,{theme:He,color:"#EBEEEE",children:[Object(m.jsx)(N,{sections:["World Model","More Models","More Information"]}),Object(m.jsxs)(l.a,{id:"content",children:[Object(m.jsx)(s.a,{id:"Home",className:"section",children:Object(m.jsxs)(s.a,{className:"innerSection",children:[Object(m.jsx)(s.a,{className:"row",alignItems:"center",background:"white",children:Object(m.jsx)(d.a,{className:"sectionHeading",children:" Introduction"})}),Object(m.jsx)(Me,{text:f[0]})]})}),Object(m.jsx)(s.a,{id:"World Model",className:"section",children:Object(m.jsxs)(s.a,{className:"innerSection",children:[Object(m.jsx)(s.a,{className:"row",alignItems:"center",children:Object(m.jsx)(d.a,{className:"sectionHeading",children:"World Model"})}),Object(m.jsx)(Ee,{graphWidth:n,dataRaw:g,modalHeight:j,text:f[1]})]})}),Object(m.jsxs)(s.a,{id:"More Models",className:"section",children:[Object(m.jsxs)(s.a,{className:"innerSection",children:[Object(m.jsx)(s.a,{className:"row",alignItems:"center",children:Object(m.jsx)(d.a,{className:"sectionHeading",children:"More Models"})}),Object(m.jsx)(Ge,{graphWidth:n,dataRaw:g,text:f[2]})]}),Object(m.jsx)(s.a,{className:"innerSection",children:Object(m.jsx)(w,{graphWidth:n})})]})]}),Object(m.jsx)(s.a,{id:"More Information",className:"footer",height:"auto",children:Object(m.jsxs)(s.a,{className:"column",children:[Object(m.jsx)(s.a,{className:"row",children:Object(m.jsx)(d.a,{borderColor:"white",color:"white",className:"sectionHeading",background:"none",children:" More Information"})}),Object(m.jsxs)(s.a,{color:"white",children:[Object(m.jsx)(u.a,{marginInline:"5%",marginBlock:"10px",width:n,children:f[3].p1}),Object(m.jsxs)(h.c,{marginInline:"5%",marginBlock:"10px",children:[Object(m.jsx)(h.b,{children:Object(m.jsx)(u.a,{children:f[3].l1})}),Object(m.jsx)(h.b,{marginBlock:"10px",children:Object(m.jsx)(u.a,{children:f[3].l2})}),Object(m.jsx)(h.b,{marginBlock:"10px",children:Object(m.jsx)(u.a,{children:f[3].l3})})]})]})]})})]})}):Object(m.jsx)("pre",{})},Le=document.getElementById("root");r.a.render(Object(m.jsx)(Re,{}),Le)},58:function(e){e.exports=JSON.parse('[{"name":"intro paragraphs","p1":"The expansion of electric vehicle (EV) fleets in coupled with the decarbonisation of power generation is fundamental to reduce air pollution, emissions, and oil demand from road transport. However, while EV deployment is more or less on track to meet these goals, the decarbonisation of electricity generation is uneven and woefully behind, putting at serious risk EV-based decarbonisation. Indeed, based on recent analysis, we know that average usage emissions of gas-powered vehicles are comparable to those of EVs charged from an electricity mix with a predominance of fossil fuels. On the other hand, current EVs in the market show larger upfront cost. However, the higher sticker price can be compensated over the vehicle lifetime by lower maintenance, fuel, and insurance costs. But most likely the sum does not add up if expensive battery replacements are needed during the EV lifetime.","p2":"This tool, using research by Varela-Barreras et al, was made to show visually how these factors have changed in the last two decades. With the ability to change different variables to see how they affect these areas, we can see a different picture of what is needed to be done to achieve our zero-emission goals in the future.","p3":""},{"name":"main desc","o1":{"title":"EV vs PV-on-EV Emissions","desc":"This graph compares the emissions of Electric Vehicles with and without PV cells. Hover over a point to see the exact values of that country. You can see that for all countries emissions are reduced when PV-on-EVs are utilised, with countries with low VKTs being advantaged."},"o2":{"title":"CO2 Reductions due to EV-Usage","desc":"Here you can see the reductions in emissions due to electric vehicles for each country, with those outside of the west seeing much greater reductions."},"o3":{"title":"Change in Carbon Intensity of Electricity Generated","desc":"Here you can compare the Carbon Intensity of the electricity generated in 2013 and 2018 for each country. Nearly all countries have seen a reduction in emissions, with the difference varying regardless of region. Hover over the legend to view a specific year."},"o4":{"title":"Comparing Average VKT and PV-only Range","desc":"This graph compares the average VKT/day of a country with the driving range powered by photovoltaic cells only. We can see that even developed countries like the US have very high VKT/day. Hover over the legend to change the view."},"o5":{"title":"Comparing Reductions in CIEG","desc":"This graph shows how much the carbon intensity of electricity has reduced between 2013 and 2018, and compares it to the potential reductions by the use of PV-on-EV cars. Those countries with long daylight hours can take advantage of this and causes significant reductions in emissions, but for others its not worth it."},"o6":{"title":"Comparing Global Horizontal Irradiance","desc":"Here you can see the Global Horizontal Irradiance, the total solar radiation incident on a horizontal surface, for each country. The higher this value the more power a PV-cell can output in these conditions."}},{"name":"second descs","o1":{"title":"EV vs PV-on-EV Emissions over time","desc":"Here we can compare the emissions of electric vehicles with and without solar panels. We can also see how that has changed over the last few years and future predictions to 2040. Hover over the legend to select a specific country."},"o2":{"title":"EV Emissions over time","desc":"Here we can more clearly see the trend of how electric vehicles have changed with time. We can see a general decrease from all 4 major regions."},"o3":{"title":"PV-on-EV Emissions over time","desc":"Here we can more clearly see the trend of how electric vehicles with solar panels have changed with time. We can see a general decrease from all 4 major regions."},"o4":{"title":"Carbon Intensity of Electricity Generated over time","desc":"This graph shows the change in Carbon Intensity of Electricity Generated and how it has/will expect to change with time."}},{"name":"references","p1":"Models and data provided by the research done by (insert reference here). Project was possible due to funding provided by the Imperial Transition to Zero Polution Initiative and Imperial Electrochemical Science & Engineering Group.","l1":"Author: Anujan Kirupakaran","l2":"Day-to-day Supervisor: Jorge Varela-Bareras","l3":"Project Supervisor: Billy Wu"}]')}},[[332,1,2]]]);
//# sourceMappingURL=main.faaf9061.chunk.js.map